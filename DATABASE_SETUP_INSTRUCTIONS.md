# ุชุนูููุงุช ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูููุฑู ุงูุชูุงุตู

## ุงูุฎุทูุงุช ุงููุทููุจุฉ

### 1. ุชุซุจูุช ุงูุชุจุนูุงุช
```bash
# ูุณุฎ ููู package.json ููุชุจุนูุงุช
cp package-database.json package.json

# ุชุซุจูุช ุงูุชุจุนูุงุช
npm install
```

### 2. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
ุฃูุดุฆ ููู `.env` ูู ุงููุฌูุฏ ุงูุฌุฐุฑ ูุฃุถู:

```env
SUPABASE_URL=https://ueofktshvaqtxjsxvisv.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here
```

**ููุงุญุธุฉ ูููุฉ:** ุงุณุชุจุฏู `your_service_role_key_here` ุจููุชุงุญ service_role ุงูุตุญูุญ ูู ูุดุฑูุน Supabase ุงูุฎุงุต ุจู.

### 3. ุชุดุบูู ุงูุณูุฑูุจุชุงุช

#### ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุฃููุงู:
```bash
node test-database-connection.js
```

#### ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```bash
node setup-contact-database.js
```

#### ุฃู ุงุณุชุฎุฏุงู ุงูุณูุฑูุจุชุงุช ุงูุจุฏููุฉ:
```bash
# ุงูุณูุฑูุจุช ุงูุจุณูุท
node update-database-simple.js

# ุงูุณูุฑูุจุช ุจุงุณุชุฎุฏุงู REST API
node update-database-rest.js
```

## ุงูุณูุฑูุจุชุงุช ุงููุชุงุญุฉ

### 1. `test-database-connection.js`
- ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุงูุชุญูู ูู ูุฌูุฏ ุงูุฌุฏุงูู
- ุงุฎุชุจุงุฑ ุฃุณุงุณู ููุนูููุงุช

### 2. `setup-contact-database.js`
- ุงูุณูุฑูุจุช ุงูุดุงูู ูุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฅูุดุงุก ุงูุฌุฏูู ุฅุฐุง ูู ููู ููุฌูุฏุงู
- ุฅุถุงูุฉ ุงูุญููู ุงูุฌุฏูุฏุฉ
- ุงุฎุชุจุงุฑ ุงููุธุงู

### 3. `update-database-simple.js`
- ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุทุฑููุฉ ุจุณูุทุฉ
- ุฅุถุงูุฉ ุงูุญููู ุงูุฌุฏูุฏุฉ
- ุชุญุฏูุซ ุฃููุงุน ุงูุจูุงูุงุช
- ุฅุถุงูุฉ ุงูููุงุฑุณ

### 4. `update-database-rest.js`
- ุงุณุชุฎุฏุงู REST API ูุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฅูุดุงุก ุงูุฌุฏูู ุฅุฐุง ูู ููู ููุฌูุฏุงู
- ุงุฎุชุจุงุฑ ุงูุนูููุงุช

## ูุง ูุชู ุชูููุฐู

### 1. ุฅูุดุงุก/ุชุญุฏูุซ ุฌุฏูู `contact_messages`
```sql
CREATE TABLE contact_messages (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  email VARCHAR(255) NOT NULL,
  phone VARCHAR(50),
  subject VARCHAR(255),
  message TEXT NOT NULL,
  status VARCHAR(50) DEFAULT 'unread',
  type VARCHAR(50) DEFAULT 'inquiry',
  package_id UUID REFERENCES packages(id) ON DELETE SET NULL,
  package_name VARCHAR(255),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### 2. ุฅุถุงูุฉ ุงูุญููู ุงูุฌุฏูุฏุฉ
- `type` - ููุน ุงูุฑุณุงูุฉ (inquiry, booking, complaint, suggestion)
- `package_id` - ูุนุฑู ุงูุจุงูุฉ ุงููุฑุชุจุทุฉ
- `package_name` - ุงุณู ุงูุจุงูุฉ

### 3. ุฅุถุงูุฉ ุงูููุงุฑุณ
- ููุฑุณ ุนูู `status`
- ููุฑุณ ุนูู `type`
- ููุฑุณ ุนูู `created_at`
- ููุฑุณ ุนูู `package_id`

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ ูู ุงูุงุชุตุงู
```
โ ุฎุทุฃ ูู ุงูุงุชุตุงู: Invalid API key
```
**ุงูุญู:** ุชุญูู ูู ุตุญุฉ `SUPABASE_SERVICE_ROLE_KEY`

### ุฎุทุฃ ูู ุฅูุดุงุก ุงูุฌุฏูู
```
โ ุฎุทุฃ ูู ุฅูุดุงุก ุงูุฌุฏูู: permission denied
```
**ุงูุญู:** ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู service_role key ูููุณ anon key

### ุฎุทุฃ ูู ุงูุญููู
```
โ๏ธ ุญูู type ุบูุฑ ููุฌูุฏ ุฃู ูุญุชุงุฌ ุชุญุฏูุซ
```
**ุงูุญู:** ุงูุฌุฏูู ููุฌูุฏ ูููู ูุญุชุงุฌ ุชุญุฏูุซุ ุงุณุชุฎุฏู `update-database-simple.js`

## ุงูุชุญูู ูู ุงููุฌุงุญ

ุจุนุฏ ุชุดุบูู ุงูุณูุฑูุจุช ุจูุฌุงุญุ ูุฌุจ ุฃู ุชุฑู:

```
๐ ุชู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ!
๐ ููููู ุงูุขู ุงุณุชุฎุฏุงู ูุธุงู ููุฑู ุงูุชูุงุตู ูุงูุญุฌุฒ
```

## ุงุฎุชุจุงุฑ ุงููุธุงู

### 1. ุงุฎุชุจุงุฑ ููุฑู ุงูุชูุงุตู ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- ุงุฐูุจ ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- ุงูุชูู ุฅูู ูุณู "ุชูุงุตู ูุนูุง"
- ุงููุฃ ุงูููุฑู ูุฃุฑุณูู
- ุชุญูู ูู ุธููุฑ ุงูุฑุณุงูุฉ ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ

### 2. ุงุฎุชุจุงุฑ ููุฑู ุงูุจูุฌุงุช
- ุงุฐูุจ ุฅูู ุฃู ุตูุญุฉ ุจุงูุฉ
- ุงุถุบุท ุนูู "ุชูุงุตู ูุนูุง ููุญุฌุฒ"
- ุงููุฃ ุงูููุฑู ูุฃุฑุณูู
- ุชุญูู ูู ุธููุฑ ุงูุฑุณุงูุฉ ูุน ุฑุจุทูุง ุจุงูุจุงูุฉ

### 3. ุงุฎุชุจุงุฑ ููุญุฉ ุงูุฅุฏุงุฑุฉ
- ุงุฐูุจ ุฅูู `/admin/messages`
- ุชุญูู ูู ุนุฑุถ ุงูุฑุณุงุฆู
- ุฌุฑุจ ุงูููุชุฑุฉ ูุงูุจุญุซ
- ุฌุฑุจ ุชุญุฏูุซ ูุญุฐู ุงูุฑุณุงุฆู

## ููุงุญุธุงุช ูููุฉ

1. **ุงูุฃูุงู:** ูุง ุชุดุงุฑู service_role key ูุน ุฃู ุดุฎุต
2. **ุงููุณุฎ ุงูุงุญุชูุงุทู:** ูู ุจุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจู ุงูุชุญุฏูุซ
3. **ุงูุงุฎุชุจุงุฑ:** ุงุฎุชุจุฑ ุงููุธุงู ูู ุจูุฆุฉ ุงูุชุทููุฑ ูุจู ุงููุดุฑ
4. **ุงููุฑุงูุจุฉ:** ุฑุงูุจ logs ุงูุฎุงุฏู ููุชุฃูุฏ ูู ุนูู ุงููุธุงู ุจุดูู ุตุญูุญ

## ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:

1. ุชุญูู ูู logs ุงูุณูุฑูุจุช
2. ุชุฃูุฏ ูู ุตุญุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
3. ุชุญูู ูู ุตูุงุญูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. ุฑุงุฌุน ูุซุงุฆู Supabase

## ุงููููุงุช ุงููุทููุจุฉ

- `test-database-connection.js` - ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
- `setup-contact-database.js` - ุงูุฅุนุฏุงุฏ ุงูุดุงูู
- `update-database-simple.js` - ุงูุชุญุฏูุซ ุงูุจุณูุท
- `update-database-rest.js` - ุงูุชุญุฏูุซ ุจุงุณุชุฎุฏุงู REST API
- `package-database.json` - ุงูุชุจุนูุงุช ุงููุทููุจุฉ
- `.env` - ูุชุบูุฑุงุช ุงูุจูุฆุฉ (ุฃูุดุฆู ุจููุณู)
