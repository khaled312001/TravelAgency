import{e as q,Q as j,i as g,M as E,q as U,u as M,c as p,o as a,a as t,b as d,w,d as y,h as N,D as f,E as n,G as u,g as r,t as v,C as k,H as S,S as T}from"./XV_oOV7_.js";import{_ as B}from"./CPTGUQvn.js";const C={class:"max-w-4xl mx-auto space-y-6"},A={class:"flex items-center justify-between"},D={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},H={class:"space-y-6"},$={class:"space-y-6"},I={key:0},L={class:"w-full h-48 bg-gray-100 rounded-lg overflow-hidden"},O=["src","alt"],F={key:0,class:"w-full h-full flex items-center justify-center text-gray-500"},G={class:"text-center"},P={key:0,class:"mt-6 bg-red-50 border border-red-200 rounded-lg p-4"},Q={class:"flex"},z={class:"text-sm text-red-700"},J={key:1,class:"mt-6 bg-green-50 border border-green-200 rounded-lg p-4"},K={class:"flex"},R={class:"text-sm text-green-700"},W={class:"mt-8 flex items-center justify-end space-x-4 space-x-reverse"},X=["disabled"],te=q({__name:"new",setup(Y){const s=j({title:"",description:"",price:"",duration_days:"",destination:"",image_url:""}),i=g(!1),m=g(""),c=g(""),b=g(!1),{getAuthHeaders:h}=E(),V=async()=>{var x;if(!i.value){i.value=!0,m.value="",c.value="";try{(await $fetch("/api/admin/packages",{method:"POST",headers:h(),body:{title:s.title,description:s.description,price:parseFloat(s.price),duration_days:parseInt(s.duration_days),destination:s.destination,image_url:s.image_url}})).success&&(c.value="تم إنشاء الباقة بنجاح!",Object.keys(s).forEach(l=>{s[l]=""}),setTimeout(()=>{T("/admin/packages")},2e3))}catch(e){console.error("Error creating package:",e),m.value=((x=e.data)==null?void 0:x.message)||"حدث خطأ أثناء إنشاء الباقة"}finally{i.value=!1}}};return U(()=>s.image_url,()=>{b.value=!1}),M({title:"إضافة باقة جديدة - لوحة التحكم"}),(x,e)=>{const l=N,_=B;return a(),p("div",C,[t("div",A,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"إضافة باقة جديدة"),t("p",{class:"text-gray-600 mt-1"},"أضف باقة سفر جديدة إلى الموقع")],-1)),d(_,{to:"/admin/packages",class:"inline-flex items-center px-4 py-2 bg-gray-600 text-white text-sm font-medium rounded-lg hover:bg-gray-700 transition-colors"},{default:w(()=>[d(l,{name:"lucide:arrow-right",class:"w-4 h-4 ml-2"}),e[7]||(e[7]=y(" العودة للقائمة "))]),_:1})]),t("form",{onSubmit:S(V,["prevent"]),class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},[t("div",D,[t("div",H,[t("div",null,[e[9]||(e[9]=t("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-2"}," عنوان الباقة * ",-1)),n(t("input",{id:"title","onUpdate:modelValue":e[0]||(e[0]=o=>r(s).title=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"مثال: رحلة إلى دبي"},null,512),[[u,r(s).title]])]),t("div",null,[e[10]||(e[10]=t("label",{for:"destination",class:"block text-sm font-medium text-gray-700 mb-2"}," الوجهة * ",-1)),n(t("input",{id:"destination","onUpdate:modelValue":e[1]||(e[1]=o=>r(s).destination=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"مثال: دبي، الإمارات العربية المتحدة"},null,512),[[u,r(s).destination]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"price",class:"block text-sm font-medium text-gray-700 mb-2"}," السعر (ريال سعودي) * ",-1)),n(t("input",{id:"price","onUpdate:modelValue":e[2]||(e[2]=o=>r(s).price=o),type:"number",required:"",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"2500.00"},null,512),[[u,r(s).price]])]),t("div",null,[e[12]||(e[12]=t("label",{for:"duration_days",class:"block text-sm font-medium text-gray-700 mb-2"}," مدة الرحلة (بالأيام) * ",-1)),n(t("input",{id:"duration_days","onUpdate:modelValue":e[3]||(e[3]=o=>r(s).duration_days=o),type:"number",required:"",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"7"},null,512),[[u,r(s).duration_days]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"image_url",class:"block text-sm font-medium text-gray-700 mb-2"}," رابط الصورة * ",-1)),n(t("input",{id:"image_url","onUpdate:modelValue":e[4]||(e[4]=o=>r(s).image_url=o),type:"url",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"https://example.com/image.jpg"},null,512),[[u,r(s).image_url]]),e[14]||(e[14]=t("p",{class:"text-xs text-gray-500 mt-1"},"يجب أن يكون الرابط صالحاً ويشير إلى صورة",-1))])]),t("div",$,[t("div",null,[e[15]||(e[15]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," وصف الباقة * ",-1)),n(t("textarea",{id:"description","onUpdate:modelValue":e[5]||(e[5]=o=>r(s).description=o),required:"",rows:"8",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"اكتب وصفاً مفصلاً للباقة..."},null,512),[[u,r(s).description]])]),r(s).image_url?(a(),p("div",I,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," معاينة الصورة ",-1)),t("div",L,[t("img",{src:r(s).image_url,alt:r(s).title||"معاينة الصورة",class:"w-full h-full object-cover",onError:e[6]||(e[6]=o=>b.value=!0)},null,40,O),r(b)?(a(),p("div",F,[t("div",G,[d(l,{name:"lucide:image-off",class:"w-8 h-8 mx-auto mb-2"}),e[16]||(e[16]=t("p",{class:"text-sm"},"لا يمكن تحميل الصورة",-1))])])):f("",!0)])])):f("",!0)])]),r(m)?(a(),p("div",P,[t("div",Q,[d(l,{name:"lucide:alert-circle",class:"h-5 w-5 text-red-400 ml-2"}),t("p",z,v(r(m)),1)])])):f("",!0),r(c)?(a(),p("div",J,[t("div",K,[d(l,{name:"lucide:check-circle",class:"h-5 w-5 text-green-400 ml-2"}),t("p",R,v(r(c)),1)])])):f("",!0),t("div",W,[d(_,{to:"/admin/packages",class:"px-6 py-2 border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors"},{default:w(()=>e[18]||(e[18]=[y(" إلغاء ")])),_:1}),t("button",{type:"submit",disabled:r(i),class:"px-6 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center"},[r(i)?(a(),k(l,{key:0,name:"lucide:loader-2",class:"w-4 h-4 ml-2 animate-spin"})):(a(),k(l,{key:1,name:"lucide:save",class:"w-4 h-4 ml-2"})),y(" "+v(r(i)?"جاري الحفظ...":"حفظ الباقة"),1)],8,X)])],32)])}}});export{te as default};
