import{e as K,i as u,m as C,s as P,u as ss,c as v,o as c,a as s,D as x,b as r,d as B,h as ts,t as o,g as e,E as m,G as f,Y as M,X as V,F as es,r as ls,C as S,n as D,H as I,_ as as}from"./CPVxZRO5.js";const os={class:"users-page space-y-4"},ns={class:"page-header"},is={class:"header-content"},ds={class:"header-right"},cs={class:"stats-grid"},rs={class:"stat-card"},us={class:"stat-icon"},vs={class:"stat-content"},ms={class:"stat-value"},ps={class:"stat-card"},_s={class:"stat-icon"},bs={class:"stat-content"},fs={class:"stat-value"},hs={class:"stat-card"},gs={class:"stat-icon"},ys={class:"stat-content"},ks={class:"stat-value"},Cs={class:"stat-card"},Us={class:"stat-icon"},ws={class:"stat-content"},xs={class:"stat-value"},Ms={class:"filters-section"},Vs={class:"filters-container"},Ss={class:"search-box"},Ds={class:"filter-controls"},Ts={class:"users-table-container"},$s={key:0,class:"loading-state"},Es={key:1,class:"empty-state"},Ls={key:2,class:"users-table"},Fs={class:"table"},qs={class:"table-body"},Bs={class:"table-cell"},Is={class:"user-info"},Ns={class:"user-avatar"},Zs=["src","alt"],As={class:"user-details"},Hs={class:"user-name"},Rs={class:"user-id"},Ws={class:"table-cell"},zs={class:"user-email"},Gs={class:"table-cell"},Os={class:"table-cell"},Qs={class:"table-cell"},Xs={class:"registration-date"},Ys={class:"table-cell"},js={class:"last-activity"},Js={class:"table-cell"},Ks={class:"action-buttons"},Ps=["onClick"],st=["onClick"],tt=["onClick"],et=["onClick"],lt={class:"modal-header"},at={key:0,class:"modal-body"},ot={class:"user-profile"},nt={class:"profile-header"},it={class:"profile-avatar"},dt=["src","alt"],ct={class:"profile-info"},rt={class:"profile-name"},ut={class:"profile-email"},vt={class:"profile-badges"},mt={class:"profile-details"},pt={class:"detail-section"},_t={class:"detail-items"},bt={class:"detail-item"},ft={class:"detail-value"},ht={class:"detail-item"},gt={class:"detail-value"},yt={class:"detail-item"},kt={class:"detail-value"},Ct={class:"detail-item"},Ut={class:"detail-value"},wt={key:0,class:"detail-section"},xt={class:"detail-items"},Mt={class:"detail-item"},Vt={class:"detail-value"},St={class:"modal-actions"},Dt={class:"modal-header"},Tt={class:"modal-title"},$t={class:"form-grid"},Et={class:"form-group"},Lt={class:"form-group"},Ft={class:"form-group"},qt={class:"form-label"},Bt=["required"],It={class:"form-group"},Nt={class:"form-group"},Zt={class:"form-group"},At={class:"modal-actions"},Ht=["disabled"],Rt=K({__name:"index",setup(Wt){const _=u([]),T=u(!0),h=u(!1),b=u(""),g=u(""),y=u(""),k=u(""),$=u(!1),U=u(!1),p=u(!1),n=u(null),E=u(null),d=u({name:"",email:"",password:"",phone:"",role:"user",status:"active"}),N=C(()=>{let l=_.value;return b.value&&(l=l.filter(t=>t.name.toLowerCase().includes(b.value.toLowerCase())||t.email.toLowerCase().includes(b.value.toLowerCase()))),g.value&&(l=l.filter(t=>t.status===g.value)),y.value&&(l=l.filter(t=>t.role===y.value)),k.value&&(l=l.filter(t=>t.created_at.startsWith(k.value))),l}),z=C(()=>_.value.length),G=C(()=>_.value.filter(l=>l.status==="active").length),O=C(()=>{const l=new Date().toISOString().slice(0,7);return _.value.filter(t=>t.created_at.startsWith(l)).length}),Q=C(()=>_.value.filter(l=>l.role==="admin").length),Z=l=>({active:"نشط",inactive:"غير نشط",suspended:"معلق"})[l]||l,A=l=>({admin:"مدير",moderator:"مشرف",user:"مستخدم"})[l]||l,H=l=>new Date(l).toLocaleDateString("ar-SA"),R=l=>new Date(l).toLocaleString("ar-SA"),L=async()=>{try{T.value=!0,_.value=[{id:"user-001",name:"أحمد محمد",email:"ahmed@example.com",phone:"+966501234567",role:"user",status:"active",bookings_count:3,created_at:"2024-01-15T10:00:00Z",last_login:"2024-01-20T14:30:00Z"},{id:"user-002",name:"فاطمة علي",email:"fatima@example.com",phone:"+966507654321",role:"admin",status:"active",bookings_count:1,created_at:"2024-01-10T09:00:00Z",last_login:"2024-01-21T08:15:00Z"}]}catch(l){console.error("Error loading users:",l)}finally{T.value=!1}},X=l=>{n.value=l,$.value=!0},W=l=>{E.value=l,d.value={...l,password:""},p.value=!0},Y=async l=>{const t=l.status==="active"?"inactive":"active";if(confirm(`هل أنت متأكد من ${t==="active"?"تفعيل":"إلغاء تفعيل"} المستخدم "${l.name}"؟`))try{l.status=t,console.log("Toggle user status:",l.id,t)}catch(a){console.error("Error toggling user status:",a)}},j=async l=>{if(confirm(`هل أنت متأكد من حذف المستخدم "${l.name}"؟`))try{console.log("Delete user:",l.id),await L()}catch(t){console.error("Error deleting user:",t)}},J=async()=>{try{h.value=!0,p.value&&E.value?console.log("Update user:",d.value):console.log("Create user:",d.value),await L(),w()}catch(l){console.error("Error saving user:",l)}finally{h.value=!1}},F=()=>{$.value=!1,n.value=null},w=()=>{U.value=!1,p.value=!1,E.value=null,d.value={name:"",email:"",password:"",phone:"",role:"user",status:"active"}};return P(()=>{L()}),ss({title:"إدارة المستخدمين - لوحة التحكم"}),(l,t)=>{const i=ts;return c(),v("div",os,[s("div",ns,[s("div",is,[t[16]||(t[16]=s("div",{class:"header-left"},[s("h1",{class:"page-title"},"إدارة المستخدمين"),s("p",{class:"page-subtitle"},"إدارة حسابات المستخدمين والصلاحيات")],-1)),s("div",ds,[s("button",{onClick:t[0]||(t[0]=a=>U.value=!0),class:"create-btn"},[r(i,{name:"lucide:plus",class:"btn-icon"}),t[15]||(t[15]=B(" إضافة مستخدم جديد "))])])])]),s("div",cs,[s("div",rs,[s("div",us,[r(i,{name:"lucide:users",class:"icon"})]),s("div",vs,[s("p",ms,o(e(z)),1),t[17]||(t[17]=s("p",{class:"stat-label"},"إجمالي المستخدمين",-1))])]),s("div",ps,[s("div",_s,[r(i,{name:"lucide:user-check",class:"icon"})]),s("div",bs,[s("p",fs,o(e(G)),1),t[18]||(t[18]=s("p",{class:"stat-label"},"المستخدمين النشطين",-1))])]),s("div",hs,[s("div",gs,[r(i,{name:"lucide:user-plus",class:"icon"})]),s("div",ys,[s("p",ks,o(e(O)),1),t[19]||(t[19]=s("p",{class:"stat-label"},"جدد هذا الشهر",-1))])]),s("div",Cs,[s("div",Us,[r(i,{name:"lucide:shield",class:"icon"})]),s("div",ws,[s("p",xs,o(e(Q)),1),t[20]||(t[20]=s("p",{class:"stat-label"},"المديرين",-1))])])]),s("div",Ms,[s("div",Vs,[s("div",Ss,[r(i,{name:"lucide:search",class:"search-icon"}),m(s("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>M(b)?b.value=a:null),type:"text",placeholder:"البحث في المستخدمين...",class:"search-input"},null,512),[[f,e(b)]])]),s("div",Ds,[m(s("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>M(g)?g.value=a:null),class:"filter-select"},t[21]||(t[21]=[s("option",{value:""},"جميع الحالات",-1),s("option",{value:"active"},"نشط",-1),s("option",{value:"inactive"},"غير نشط",-1),s("option",{value:"suspended"},"معلق",-1)]),512),[[V,e(g)]]),m(s("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>M(y)?y.value=a:null),class:"filter-select"},t[22]||(t[22]=[s("option",{value:""},"جميع الأدوار",-1),s("option",{value:"admin"},"مدير",-1),s("option",{value:"user"},"مستخدم",-1),s("option",{value:"moderator"},"مشرف",-1)]),512),[[V,e(y)]]),m(s("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>M(k)?k.value=a:null),type:"date",class:"filter-select",placeholder:"تاريخ التسجيل"},null,512),[[f,e(k)]])])])]),s("div",Ts,[e(T)?(c(),v("div",$s,t[23]||(t[23]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"جاري تحميل المستخدمين...",-1)]))):e(N).length===0?(c(),v("div",Es,[r(i,{name:"lucide:users",class:"empty-icon"}),t[24]||(t[24]=s("h3",null,"لا توجد مستخدمين",-1)),t[25]||(t[25]=s("p",null,"لم يتم العثور على أي مستخدمين تطابق معايير البحث",-1)),s("button",{onClick:t[5]||(t[5]=a=>U.value=!0),class:"create-first-btn"}," إضافة أول مستخدم ")])):(c(),v("div",Ls,[s("table",Fs,[t[26]||(t[26]=s("thead",{class:"table-header"},[s("tr",null,[s("th",{class:"table-cell"},"المستخدم"),s("th",{class:"table-cell"},"البريد الإلكتروني"),s("th",{class:"table-cell"},"الدور"),s("th",{class:"table-cell"},"الحالة"),s("th",{class:"table-cell"},"تاريخ التسجيل"),s("th",{class:"table-cell"},"آخر نشاط"),s("th",{class:"table-cell"},"الإجراءات")])],-1)),s("tbody",qs,[(c(!0),v(es,null,ls(e(N),a=>(c(),v("tr",{key:a.id,class:"table-row"},[s("td",Bs,[s("div",Is,[s("div",Ns,[a.avatar_url?(c(),v("img",{key:0,src:a.avatar_url,alt:a.name,class:"avatar-img"},null,8,Zs)):(c(),S(i,{key:1,name:"lucide:user",class:"avatar-icon"}))]),s("div",As,[s("p",Hs,o(a.name),1),s("p",Rs,"ID: "+o(a.id.slice(-8)),1)])])]),s("td",Ws,[s("span",zs,o(a.email),1)]),s("td",Gs,[s("span",{class:D(["role-badge",a.role])},o(A(a.role)),3)]),s("td",Os,[s("span",{class:D(["status-badge",a.status])},o(Z(a.status)),3)]),s("td",Qs,[s("span",Xs,o(H(a.created_at)),1)]),s("td",Ys,[s("span",js,o(H(a.last_login)),1)]),s("td",Js,[s("div",Ks,[s("button",{onClick:q=>X(a),class:"action-btn view"},[r(i,{name:"lucide:eye",class:"action-icon"})],8,Ps),s("button",{onClick:q=>W(a),class:"action-btn edit"},[r(i,{name:"lucide:edit",class:"action-icon"})],8,st),s("button",{onClick:q=>Y(a),class:"action-btn status"},[r(i,{name:a.status==="active"?"lucide:user-x":"lucide:user-check",class:"action-icon"},null,8,["name"])],8,tt),s("button",{onClick:q=>j(a),class:"action-btn delete"},[r(i,{name:"lucide:trash-2",class:"action-icon"})],8,et)])])]))),128))])])]))]),e($)?(c(),v("div",{key:0,class:"modal-overlay",onClick:F},[s("div",{class:"modal-content large",onClick:t[7]||(t[7]=I(()=>{},["stop"]))},[s("div",lt,[t[27]||(t[27]=s("h2",{class:"modal-title"},"تفاصيل المستخدم",-1)),s("button",{onClick:F,class:"modal-close"},[r(i,{name:"lucide:x",class:"close-icon"})])]),e(n)?(c(),v("div",at,[s("div",ot,[s("div",nt,[s("div",it,[e(n).avatar_url?(c(),v("img",{key:0,src:e(n).avatar_url,alt:e(n).name,class:"avatar-large"},null,8,dt)):(c(),S(i,{key:1,name:"lucide:user",class:"avatar-icon-large"}))]),s("div",ct,[s("h3",rt,o(e(n).name),1),s("p",ut,o(e(n).email),1),s("div",vt,[s("span",{class:D(["role-badge",e(n).role])},o(A(e(n).role)),3),s("span",{class:D(["status-badge",e(n).status])},o(Z(e(n).status)),3)])])]),s("div",mt,[s("div",pt,[t[32]||(t[32]=s("h4",{class:"section-title"},"معلومات الحساب",-1)),s("div",_t,[s("div",bt,[t[28]||(t[28]=s("span",{class:"detail-label"},"معرف المستخدم:",-1)),s("span",ft,o(e(n).id),1)]),s("div",ht,[t[29]||(t[29]=s("span",{class:"detail-label"},"تاريخ التسجيل:",-1)),s("span",gt,o(R(e(n).created_at)),1)]),s("div",yt,[t[30]||(t[30]=s("span",{class:"detail-label"},"آخر تسجيل دخول:",-1)),s("span",kt,o(R(e(n).last_login)),1)]),s("div",Ct,[t[31]||(t[31]=s("span",{class:"detail-label"},"عدد الحجوزات:",-1)),s("span",Ut,o(e(n).bookings_count||0),1)])])]),e(n).phone?(c(),v("div",wt,[t[34]||(t[34]=s("h4",{class:"section-title"},"معلومات التواصل",-1)),s("div",xt,[s("div",Mt,[t[33]||(t[33]=s("span",{class:"detail-label"},"رقم الهاتف:",-1)),s("span",Vt,o(e(n).phone),1)])])])):x("",!0)])])])):x("",!0),s("div",St,[s("button",{onClick:F,class:"btn-secondary"}," إغلاق "),s("button",{onClick:t[6]||(t[6]=a=>W(e(n))),class:"btn-primary"},[r(i,{name:"lucide:edit",class:"btn-icon"}),t[35]||(t[35]=B(" تعديل المستخدم "))])])])])):x("",!0),e(U)||e(p)?(c(),v("div",{key:1,class:"modal-overlay",onClick:w},[s("div",{class:"modal-content",onClick:t[14]||(t[14]=I(()=>{},["stop"]))},[s("div",Dt,[s("h2",Tt,o(e(p)?"تعديل المستخدم":"إضافة مستخدم جديد"),1),s("button",{onClick:w,class:"modal-close"},[r(i,{name:"lucide:x",class:"close-icon"})])]),s("form",{onSubmit:I(J,["prevent"]),class:"modal-form"},[s("div",$t,[s("div",Et,[t[36]||(t[36]=s("label",{class:"form-label"},"الاسم *",-1)),m(s("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>e(d).name=a),type:"text",class:"form-input",required:""},null,512),[[f,e(d).name]])]),s("div",Lt,[t[37]||(t[37]=s("label",{class:"form-label"},"البريد الإلكتروني *",-1)),m(s("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>e(d).email=a),type:"email",class:"form-input",required:""},null,512),[[f,e(d).email]])]),s("div",Ft,[s("label",qt,"كلمة المرور "+o(e(p)?"(اتركها فارغة للحفاظ على الكلمة الحالية)":"*"),1),m(s("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>e(d).password=a),type:"password",class:"form-input",required:!e(p)},null,8,Bt),[[f,e(d).password]])]),s("div",It,[t[38]||(t[38]=s("label",{class:"form-label"},"رقم الهاتف",-1)),m(s("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>e(d).phone=a),type:"tel",class:"form-input"},null,512),[[f,e(d).phone]])]),s("div",Nt,[t[40]||(t[40]=s("label",{class:"form-label"},"الدور *",-1)),m(s("select",{"onUpdate:modelValue":t[12]||(t[12]=a=>e(d).role=a),class:"form-select",required:""},t[39]||(t[39]=[s("option",{value:"user"},"مستخدم",-1),s("option",{value:"moderator"},"مشرف",-1),s("option",{value:"admin"},"مدير",-1)]),512),[[V,e(d).role]])]),s("div",Zt,[t[42]||(t[42]=s("label",{class:"form-label"},"الحالة",-1)),m(s("select",{"onUpdate:modelValue":t[13]||(t[13]=a=>e(d).status=a),class:"form-select"},t[41]||(t[41]=[s("option",{value:"active"},"نشط",-1),s("option",{value:"inactive"},"غير نشط",-1),s("option",{value:"suspended"},"معلق",-1)]),512),[[V,e(d).status]])])]),s("div",At,[s("button",{type:"button",onClick:w,class:"btn-secondary"}," إلغاء "),s("button",{type:"submit",class:"btn-primary",disabled:e(h)},[e(h)?(c(),S(i,{key:0,name:"lucide:loader-2",class:"btn-icon animate-spin"})):(c(),S(i,{key:1,name:"lucide:save",class:"btn-icon"})),B(" "+o(e(h)?"جاري الحفظ...":"حفظ"),1)],8,Ht)])],32)])])):x("",!0)])}}}),Gt=as(Rt,[["__scopeId","data-v-ed938bbd"]]);export{Gt as default};
