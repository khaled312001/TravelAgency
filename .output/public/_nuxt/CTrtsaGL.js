import{_ as R}from"./CXpDyb_a.js";import{_ as H}from"./B4HFk09F.js";import{e as T,z as q,i as $,m as w,U,c as p,o as d,a as e,H as E,b as c,h as M,t as a,g as t,F as P,D as f,E as A,G as z,n as B,d as G,C as D,w as I,r as O,V as J,P as K,q as Q,u as X,y as L,W as Y}from"./CPVxZRO5.js";import{u as Z}from"./B5tq0e2L.js";import{_ as ee,a as te,u as ae}from"./BenkRH5m.js";import{u as W}from"./CoA2b7mE.js";const se={class:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/50 overflow-y-auto py-6"},oe={class:"sr-only"},le={key:0,class:"flex flex-col items-center justify-center py-8"},re={class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4"},ne={class:"text-xl font-bold text-gray-900 mb-2"},ie={class:"text-gray-600 text-center mb-4"},ce={class:"mb-8 mt-8"},de={class:"text-2xl font-bold mb-3 text-gray-900"},me={class:"text-gray-600"},pe={class:"mt-4 p-4 bg-primary/5 rounded-xl text-sm text-gray-600 flex items-start gap-2"},ue={class:"mt-4 p-4 bg-primary/5 rounded-xl text-sm text-gray-600 flex items-start gap-2"},ge={class:"block text-sm font-medium text-gray-700 mb-1 ltr:text-left rtl:text-right",for:"name"},_e={class:"relative"},he=["placeholder"],xe={key:0,class:"mt-1 text-sm text-red-500 ltr:text-left rtl:text-right"},fe={class:"block text-sm font-medium text-gray-700 mb-1 ltr:text-left rtl:text-right",for:"phone"},ve={class:"relative"},ye=["placeholder"],ke={key:0,class:"mt-1 text-sm text-red-500 ltr:text-left rtl:text-right"},be={class:"block text-sm font-medium text-gray-700 mb-1 ltr:text-left rtl:text-right",for:"email"},$e={class:"relative"},we=["placeholder"],Ce={class:"block text-sm font-medium text-gray-700 mb-1 ltr:text-left rtl:text-right",for:"message"},Se={class:"relative"},Ne=["placeholder"],Ve=["disabled"],Fe={key:0},je={key:1,class:"flex items-center justify-center gap-2"},Ae=T({__name:"PackageContactFormModal",props:{package_:{}},emits:["close"],setup(m,{emit:C}){const v=m,{t:s}=q(),{sendPackageNotification:S}=W(),_=$(!1),y=$(!1),g=$(!1),l=$(""),k=w(()=>{const r=`title_${q().locale.value.slice(0,2)}`;return v.package_[r]}),i=$({name:"",email:"",phone:"",message:""}),o=$({name:"",phone:"",email:"",message:""}),u=r=>/^[+]?[\d\s-]{8,}$/.test(r),b=r=>{if(o.value[r]="",(r==="name"||r==="phone")&&!i.value[r])return o.value[r]=s("validation.required"),!1;switch(r){case"phone":if(!u(i.value.phone))return o.value.phone=s("validation.invalid_phone"),!1;break}return!0},N=()=>{let r=!0;return["name","phone"].forEach(n=>{b(n)||(r=!1)}),r},V=w(()=>i.value.name.length>0&&i.value.phone.length>0&&u(i.value.phone)&&Object.values(o.value).every(r=>r==="")),F=async()=>{if(N()){_.value=!0;try{const r=await S({name:i.value.name,email:i.value.email,phone:i.value.phone,message:i.value.message,packageId:v.package_.id,packageName:k.value});g.value=r.success,l.value=r.error||"",y.value=!0}catch(r){console.error("Failed to submit form:",r),g.value=!1,l.value=s("packages.details.package_contact_form.error_message")}finally{_.value=!1}}};return(r,n)=>{const h=M,j=U("NotificationStatus");return d(),p("div",se,[e("div",{class:"relative w-full max-w-2xl bg-white rounded-2xl shadow-xl p-6 md:p-8 max-h-[min(calc(100vh-2rem),42.7rem)] my-6 mt-14 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 hover:scrollbar-thumb-gray-400",onClick:n[8]||(n[8]=E(()=>{},["stop"]))},[e("button",{onClick:n[0]||(n[0]=x=>r.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors",type:"button"},[c(h,{name:"material-symbols:close",class:"w-6 h-6"}),e("span",oe,a(t(s)("common.close")),1)]),y.value?(d(),p("div",le,[e("div",re,[c(h,{name:"material-symbols:check",class:"w-10 h-10 text-green-600"})]),e("h3",ne,a(t(s)("packages.details.package_contact_form.success_title")),1),e("p",ie,a(t(s)("packages.details.package_contact_form.success_message")),1),c(j,{sent:g.value,error:l.value},null,8,["sent","error"]),e("button",{onClick:n[1]||(n[1]=x=>r.$emit("close")),class:"mt-6 rounded-xl bg-primary px-8 py-3 text-white hover:bg-primary-dark transition-colors"},a(t(s)("common.close")),1)])):(d(),p(P,{key:1},[e("div",ce,[e("h2",de,a(t(s)("packages.details.package_contact_form.title",{name:k.value})),1),e("p",me,a(t(s)("packages.details.package_contact_form.description",{name:k.value})),1),e("div",pe,[c(h,{name:"material-symbols:schedule",class:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),e("p",null,a(t(s)("packages.details.package_contact_form.response_time")),1)]),e("div",ue,[c(h,{name:"material-symbols:lightbulb-outline",class:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),e("p",null,a(t(s)("packages.details.package_contact_form.custom_package_note")),1)])]),e("form",{onSubmit:E(F,["prevent"]),class:"space-y-6"},[e("div",null,[e("label",ge,a(t(s)("packages.details.package_contact_form.name")),1),e("div",_e,[c(h,{name:"material-symbols:person-outline",class:"absolute ltr:left-4 rtl:right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),A(e("input",{id:"name","onUpdate:modelValue":n[2]||(n[2]=x=>i.value.name=x),type:"text",required:"",class:B(["w-full px-4 py-3 ltr:pl-12 rtl:pr-12 rounded-xl border focus:ring-2 focus:ring-primary transition-colors",o.value.name?"border-red-500":"border-gray-300 focus:border-primary"]),placeholder:t(s)("packages.details.package_contact_form.name_placeholder"),onBlur:n[3]||(n[3]=x=>b("name"))},null,42,he),[[z,i.value.name]])]),o.value.name?(d(),p("p",xe,a(o.value.name),1)):f("",!0)]),e("div",null,[e("label",fe,a(t(s)("packages.details.package_contact_form.phone")),1),e("div",ve,[c(h,{name:"material-symbols:call-outline",class:"absolute ltr:left-4 rtl:right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),A(e("input",{id:"phone","onUpdate:modelValue":n[4]||(n[4]=x=>i.value.phone=x),type:"text",required:"",class:B(["w-full px-4 py-3 ltr:pl-12 rtl:pr-12 rounded-xl border focus:ring-2 focus:ring-primary transition-colors",o.value.phone?"border-red-500":"border-gray-300 focus:border-primary"]),placeholder:t(s)("packages.details.package_contact_form.phone_placeholder"),onBlur:n[5]||(n[5]=x=>b("phone"))},null,42,ye),[[z,i.value.phone]])]),o.value.phone?(d(),p("p",ke,a(o.value.phone),1)):f("",!0)]),e("div",null,[e("label",be,a(t(s)("packages.details.package_contact_form.email")),1),e("div",$e,[c(h,{name:"material-symbols:mail-outline",class:"absolute ltr:left-4 rtl:right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),A(e("input",{id:"email","onUpdate:modelValue":n[6]||(n[6]=x=>i.value.email=x),type:"text",class:B(["w-full px-4 py-3 ltr:pl-12 rtl:pr-12 rounded-xl border focus:ring-2 focus:ring-primary transition-colors"]),placeholder:t(s)("packages.details.package_contact_form.email_placeholder")},null,8,we),[[z,i.value.email]])])]),e("div",null,[e("label",Ce,a(t(s)("packages.details.package_contact_form.request_details")),1),e("div",Se,[c(h,{name:"material-symbols:chat-outline",class:"absolute ltr:left-4 rtl:right-4 top-3 w-5 h-5 text-gray-400"}),A(e("textarea",{id:"message","onUpdate:modelValue":n[7]||(n[7]=x=>i.value.message=x),rows:"4",class:"w-full px-4 py-3 ltr:pl-12 rtl:pr-12 rounded-xl border focus:ring-2 focus:ring-primary transition-colors resize-none",placeholder:t(s)("packages.details.package_contact_form.request_details_placeholder")},null,8,Ne),[[z,i.value.message]])])]),e("button",{type:"submit",class:"w-full rounded-xl bg-primary px-8 py-3 text-white hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:_.value||!V.value},[_.value?(d(),p("span",je,[n[9]||(n[9]=e("span",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1)),G(" "+a(t(s)("common.loading")),1)])):(d(),p("span",Fe,a(t(s)("packages.details.package_contact_form.submit")),1))],8,Ve)],32)],64))])])}}}),ze={class:"mx-auto max-w-4xl"},qe={class:"mb-12"},Be={class:"text-2xl font-bold mb-6"},Pe={class:"mb-4 text-4xl font-bold"},De={class:"mb-8 text-lg text-gray-700"},Ie={class:"mb-12"},Te={class:"text-2xl font-bold mb-6"},Ue={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ee={class:"flex items-center gap-3 bg-gray-50 p-4 rounded-xl"},Le={class:"font-medium"},Me={class:"text-gray-700"},Ge={key:0,class:"flex items-center gap-3 bg-gray-50 p-4 rounded-xl"},We={class:"font-medium"},Re={class:"text-gray-700"},He={key:1,class:"flex items-center gap-3 bg-gray-50 p-4 rounded-xl"},Oe={class:"font-medium"},Je={class:"flex items-center gap-2 mt-1"},Ke={class:"text-gray-700"},Qe={class:"text-base text-gray-700 font-normal"},Xe={class:"bg-gray-900 text-white text-xs px-3 py-2 rounded-lg shadow-lg max-w-xs text-center"},Ye={class:"flex items-center gap-3 bg-gray-50 p-4 rounded-xl"},Ze={class:"font-medium"},et={class:"text-gray-700"},tt={class:"mb-12"},at={class:"text-2xl font-bold mb-6"},st={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},ot={key:0,class:"flex items-center gap-3 bg-gray-50 p-4 rounded-xl"},lt={class:"font-medium"},rt={key:1,class:"flex flex-col gap-1 bg-gray-50 p-4 rounded-xl"},nt={class:"flex items-center gap-3"},it={class:"font-medium"},ct={key:0,class:"flex items-center gap-1 mt-1"},dt={class:"text-xs text-gray-700"},mt={key:2,class:"flex items-center gap-3 bg-gray-50 p-4 rounded-xl"},pt={class:"font-medium"},ut={class:"bg-primary/5 rounded-2xl p-6 md:p-8 mb-12"},gt={class:"flex flex-col md:flex-row items-center gap-6 md:gap-8"},_t={class:"flex-1"},ht={class:"text-2xl font-bold mb-3 md:mb-4"},xt={class:"text-gray-600 mb-6"},ft={class:"flex flex-col sm:flex-row gap-4"},vt=["href"],yt=T({__name:"PackageDetails",props:["package_"],setup(m){const C=m,v=$(!1),{t:s,locale:S}=q(),{getWhatsAppUrl:_}=W();return(y,g)=>{var i,o,u,b,N,V,F,r,n,h;const l=M,k=U("VTooltip");return d(),p(P,null,[e("div",ze,[e("div",qe,[e("h2",Be,a(t(s)("packages.details.overview")),1),e("h1",Pe,a(t(S)==="ar-SA"?m.package_.title_ar:m.package_.title_en),1),e("p",De,a(t(S)==="ar-SA"?m.package_.description_ar:m.package_.description_en),1)]),e("div",Ie,[e("h2",Te,a(t(s)("packages.details.package_info")),1),e("div",Ue,[e("div",Ee,[c(l,{name:"material-symbols:schedule-outline",class:"h-6 w-6 text-primary"}),e("div",null,[e("div",Le,a(t(s)("packages.details.duration")),1),e("div",Me,a(t(s)("packages.details.duration",{count:(i=m.package_)==null?void 0:i.duration_days})),1)])]),(o=m.package_)!=null&&o.travel_period?(d(),p("div",Ge,[c(l,{name:"material-symbols:date-range-outline",class:"h-6 w-6 text-primary"}),e("div",null,[e("div",We,a(t(s)("packages.details.travel_period")),1),e("div",Re,a((u=m.package_)==null?void 0:u.travel_period),1)])])):f("",!0),(b=m.package_)!=null&&b.price?(d(),p("div",He,[c(ee,{size:24,class:"text-primary"}),e("div",null,[e("div",Oe,a(y.$t("packages.details.price")),1),e("div",Je,[e("span",Ke,a((N=m.package_)==null?void 0:N.price.toLocaleString()),1),e("span",Qe,a(y.$t("packages.details.per_person")),1),c(k,{triggers:["hover","focus"],placement:"top"},{popper:I(()=>[e("div",Xe,a(y.$t("packages.details.price_info_tooltip")),1)]),default:I(()=>[c(l,{name:"material-symbols:info-outline",class:"w-5 h-5 text-gray-400 cursor-pointer"})]),_:1})])])])):f("",!0),e("div",Ye,[c(l,{name:"material-symbols:group-outline",class:"h-6 w-6 text-primary"}),e("div",null,[e("div",Ze,a(t(s)("packages.details.travelers")),1),e("div",et,a(t(s)("packages.details.max_persons_qty",{count:(V=m.package_)==null?void 0:V.max_persons})),1)])])])]),e("div",tt,[e("h2",at,a(t(s)("packages.details.included_services")),1),e("div",st,[(F=m.package_)!=null&&F.included_options.flight?(d(),p("div",ot,[c(te,{size:24,class:"text-primary"}),e("span",lt,a(t(s)("packages.details.flight")),1)])):f("",!0),(r=m.package_)!=null&&r.included_options.hotel?(d(),p("div",rt,[e("div",nt,[c(l,{name:"material-symbols:hotel-outline",class:"h-6 w-6 text-primary"}),e("span",it,a(t(s)("packages.details.hotel")),1)]),(n=m.package_)!=null&&n.included_options.hotelGrade?(d(),p("div",ct,[(d(!0),p(P,null,O(m.package_.included_options.hotelGrade,j=>(d(),D(l,{key:j,name:"material-symbols:star",class:"w-4 h-4 text-yellow-400","aria-label":"star"}))),128)),e("span",dt,a(t(s)("packages.details.hotel_grade",{grade:m.package_.included_options.hotelGrade})),1)])):f("",!0)])):f("",!0),(h=m.package_)!=null&&h.included_options.transportation?(d(),p("div",mt,[c(l,{name:"material-symbols:directions-car-outline",class:"h-6 w-6 text-primary"}),e("span",pt,a(t(s)("packages.details.transportation")),1)])):f("",!0)])]),e("div",ut,[e("div",gt,[e("div",_t,[e("h3",ht,a(t(s)("packages.details.custom_package.title")),1),e("p",xt,a(t(s)("packages.details.custom_package.description")),1),e("div",ft,[e("button",{onClick:g[0]||(g[0]=j=>v.value=!0),class:"rounded-full bg-primary-500 px-8 py-3 text-white hover:bg-primary-800 transition-colors flex items-center justify-center gap-2"},[c(l,{name:"material-symbols:chat",class:"h-5 w-5"}),e("span",null,a(t(s)("packages.details.custom_package.cta")),1)]),e("a",{href:t(_)(`${t(s)("whatsapp.messages.package_interest",{name:C.package_[`title_${t(S).slice(0,2)}`]})}`),target:"_blank",rel:"noopener noreferrer",class:"rounded-full bg-[#25D366] px-8 py-3 text-white hover:bg-[#128C7E] transition-colors flex items-center justify-center gap-2"},[c(l,{name:"logos:whatsapp-icon",class:"w-5 h-5"}),e("span",null,a(y.$t("packages.details.custom_package.cta_whatsapp")),1)],8,vt)])])])])]),v.value?(d(),D(Ae,{key:0,package_:m.package_,onClose:g[1]||(g[1]=j=>v.value=!1)},null,8,["package_"])):f("",!0)],64)}}}),kt={key:0,class:"flex justify-center items-center min-h-screen"},bt={class:"sr-only"},$t={key:1,class:"min-h-screen flex flex-col items-center justify-center px-4 text-center"},wt={class:"text-2xl font-bold text-gray-900 mb-4"},Ct={class:"text-gray-600 mb-8"},St={key:2,class:"relative min-h-screen"},qt=T({__name:"[id]",async setup(m){let C,v;const s=J(),{t:S,locale:_}=q(),{getPackageById:y}=ae(),g=$(!1),{data:l,pending:k,error:i}=([C,v]=K(()=>Z(`package-${s.params.id}`,()=>y(s.params.id),{watch:[s.params.id]})),C=await C,v(),C);return Q(l,o=>{!o&&!k.value&&Y().push("/packages")}),X({title:w(()=>l.value?`${l.value[`title_${_.value.slice(0,2)}`]} | Wonder Land Agency`:"Loading..."),meta:[{name:"description",content:w(()=>{var o;return((o=l.value)==null?void 0:o[`description_${_.value.slice(0,2)}`])||""})},{property:"og:title",content:w(()=>{var o;return((o=l.value)==null?void 0:o[`title_${_.value.slice(0,2)}`])||""})},{property:"og:description",content:w(()=>{var o;return((o=l.value)==null?void 0:o[`description_${_.value.slice(0,2)}`])||""})},{property:"og:image",content:w(()=>{var o;return((o=l.value)==null?void 0:o.image_url)||""})},{name:"twitter:card",content:"summary_large_image"},{property:"og:type",content:"product"},{property:"og:price:amount",content:w(()=>{var o;return((o=l.value)==null?void 0:o.price.toString())||""})},{property:"og:price:currency",content:"SAR"}]}),(o,u)=>{const b=R,N=H,V=U("ContactFormModal");return d(),p("div",null,[t(k)?(d(),p("div",kt,[u[2]||(u[2]=e("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"},null,-1)),e("span",bt,a(o.$t("common.loading")),1)])):t(i)?(d(),p("div",$t,[e("h1",wt,a(o.$t("common.error")),1),e("p",Ct,a(t(i).message),1),c(b,{to:"/",class:"rounded-full bg-primary px-6 py-3 text-white hover:bg-primary-dark transition-colors"},{default:I(()=>[G(a(o.$t("common.back_home")),1)]),_:1})])):t(l)?(d(),p("div",St,[e("div",{class:"relative h-[40vh] md:h-[60vh]",style:L({viewTransitionName:`package-image-${t(l).id}`})},[c(N,{src:t(l).image_url,class:"h-full w-full object-cover",alt:o.$i18n.locale==="ar-SA"?t(l).title_ar:t(l).title_en},null,8,["src","alt"]),u[3]||(u[3]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"},null,-1))],4),e("div",{class:"relative z-10 -mt-32 rounded-t-[2.5rem] bg-surface px-4 pb-20 pt-12 md:px-8",style:L({viewTransitionName:`package-content-${t(l).id}`})},[c(yt,{package_:t(l),onContact:u[0]||(u[0]=F=>g.value=!0)},null,8,["package_"])],4)])):f("",!0),g.value?(d(),D(V,{key:3,package_:t(l),onClose:u[1]||(u[1]=F=>g.value=!1)},null,8,["package_"])):f("",!0)])}}});export{qt as default};
