import{_ as T}from"./CiRqfizk.js";import{_ as G}from"./DgDa7Lzz.js";import{e as W,z as H,i as k,Q as U,m as N,U as Q,c as h,o as d,a as e,H as A,b as c,h as O,t as s,g as t,F as B,D as b,E as q,G as F,n as V,d as v,V as R,P as Z,u as J,w as K,r as M,C as X,Z as Y}from"./cyIqoV0L.js";import{u as tt}from"./DivPEPar.js";import{u as P}from"./DBII4xxz.js";import{u as et}from"./DdE3CpO2.js";import"./C7uf9Ft6.js";const st={class:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/50 overflow-y-auto py-6"},ot={class:"sr-only"},nt={key:0,class:"flex flex-col items-center justify-center py-8"},at={class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4"},it={class:"text-xl font-bold text-gray-900 mb-2"},rt={class:"text-gray-600 text-center mb-4"},lt={class:"mb-8 mt-4"},mt={class:"text-2xl font-bold mb-3 text-gray-900"},dt={class:"text-gray-600"},ct={class:"mt-4 p-4 bg-primary/5 rounded-xl text-sm text-gray-600 flex items-start gap-2"},ut={class:"mt-4 p-4 bg-primary/5 rounded-xl text-sm text-gray-600 flex items-start gap-2"},ht={for:"name",class:"block text-sm font-medium text-gray-700 mb-1 ltr:text-left rtl:text-right"},pt={class:"relative"},ft=["placeholder"],_t={key:0,class:"mt-1 text-sm text-red-500 ltr:text-left rtl:text-right"},xt={for:"phone",class:"block text-sm font-medium text-gray-700 mb-1 ltr:text-left rtl:text-right"},gt={class:"relative"},bt=["placeholder"],yt={key:0,class:"mt-1 text-sm text-red-500 ltr:text-left rtl:text-right"},vt={for:"email",class:"block text-sm font-medium text-gray-700 mb-1 ltr:text-left rtl:text-right"},wt={class:"relative"},kt=["placeholder"],$t={for:"details",class:"block text-sm font-medium text-gray-700 mb-1 ltr:text-left rtl:text-right"},Nt={class:"relative"},Ct=["placeholder"],jt=["disabled"],Dt={key:0,class:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"},St=W({__name:"DestinationContactFormModal",props:{destinationName:{}},emits:["close","submit"],setup(I,{emit:w}){const{t:i}=H(),{sendDestinationNotification:C}=P(),_=w,p=I,g=k(!1),j=k(!1),y=k(!1),u=k(""),$=k(!1),r=U({name:"",phone:"",email:"",details:"",destinationName:p.destinationName}),l=U({name:"",phone:"",email:"",details:""}),D=N(()=>{const n=["name","phone"];return Object.entries(l).some(([o,f])=>f!=="")||n.some(o=>!r[o])});function E(n){return/^\+?[0-9\s\-()]{8,20}$/.test(String(n))}function m(n){switch(n){case"name":r.name?r.name.length<2?l.name=i("home.destinations.destination_form.name_too_short"):l.name="":l.name=i("home.destinations.destination_form.name_required");break;case"phone":r.phone?E(r.phone)?l.phone="":l.phone=i("home.destinations.destination_form.phone_invalid"):l.phone=i("home.destinations.destination_form.phone_required");break;case"email":case"details":l[n]="";break}}function x(){return m("name"),m("phone"),Object.values(l).every(n=>n==="")&&["name","phone"].every(n=>r[n])}async function z(){if(x())try{g.value=!0;const n=await C({name:r.name,email:r.email,phone:r.phone,message:r.details,destinationName:p.destinationName});y.value=n.success,u.value=n.error||"",$.value=!n.success&&!n.error,j.value=!0,_("submit",{...r})}catch(n){console.error("Failed to submit form:",n),y.value=!1,$.value=!0,u.value=i("home.destinations.destination_form.error_message")}finally{g.value=!1}}return(n,o)=>{const f=O,S=Q("NotificationStatus");return d(),h("div",st,[e("div",{class:"relative w-full max-w-2xl bg-white rounded-2xl shadow-xl p-6 md:p-8 max-h-[min(calc(100vh-2rem),42.7rem)] my-6 mt-14 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 hover:scrollbar-thumb-gray-400",onClick:o[8]||(o[8]=A(()=>{},["stop"]))},[e("button",{onClick:o[0]||(o[0]=a=>n.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors",type:"button"},[c(f,{name:"material-symbols:close",class:"w-6 h-6"}),e("span",ot,s(t(i)("common.close")),1)]),t(j)?(d(),h("div",nt,[e("div",at,[c(f,{name:"material-symbols:check",class:"w-10 h-10 text-green-600"})]),e("h3",it,s(t(i)("home.destinations.destination_form.success_title")),1),e("p",rt,s(t(i)("home.destinations.destination_form.success_message",{name:n.destinationName})),1),c(S,{sent:t(y),error:t(u),failed:t($)},null,8,["sent","error","failed"]),e("button",{onClick:o[1]||(o[1]=a=>n.$emit("close")),class:"mt-6 rounded-xl bg-primary px-8 py-3 text-white hover:bg-primary-dark transition-colors"},s(t(i)("common.close")),1)])):(d(),h(B,{key:1},[e("div",lt,[e("h2",mt,s(t(i)("home.destinations.destination_form.title",{name:n.destinationName})),1),e("p",dt,s(t(i)("home.destinations.destination_form.description",{name:n.destinationName})),1),e("div",ct,[c(f,{name:"material-symbols:schedule",class:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),e("p",null,s(t(i)("home.destinations.destination_form.response_time")),1)]),e("div",ut,[c(f,{name:"material-symbols:lightbulb-outline",class:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),e("p",null,s(t(i)("home.destinations.destination_form.custom_package_note")),1)])]),e("form",{onSubmit:A(z,["prevent"]),class:"space-y-6"},[e("div",null,[e("label",ht,s(t(i)("home.destinations.destination_form.name")),1),e("div",pt,[c(f,{name:"material-symbols:person-outline",class:"absolute ltr:left-4 rtl:right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),q(e("input",{id:"name","onUpdate:modelValue":o[2]||(o[2]=a=>t(r).name=a),type:"text",required:"",class:V(["w-full px-4 py-3 ltr:pl-12 rtl:pr-12 rounded-xl border focus:ring-2 focus:ring-primary transition-colors",t(l).name?"border-red-500":"border-gray-300 focus:border-primary"]),placeholder:t(i)("home.destinations.destination_form.name_placeholder"),onBlur:o[3]||(o[3]=a=>m("name"))},null,42,ft),[[F,t(r).name]])]),t(l).name?(d(),h("p",_t,s(t(l).name),1)):b("",!0)]),e("div",null,[e("label",xt,s(t(i)("home.destinations.destination_form.phone")),1),e("div",gt,[c(f,{name:"material-symbols:call-outline",class:"absolute ltr:left-4 rtl:right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),q(e("input",{id:"phone","onUpdate:modelValue":o[4]||(o[4]=a=>t(r).phone=a),type:"text",required:"",class:V(["w-full px-4 py-3 ltr:pl-12 rtl:pr-12 rounded-xl border focus:ring-2 focus:ring-primary transition-colors",t(l).phone?"border-red-500":"border-gray-300 focus:border-primary"]),placeholder:t(i)("home.destinations.destination_form.phone_placeholder"),onBlur:o[5]||(o[5]=a=>m("phone"))},null,42,bt),[[F,t(r).phone]])]),t(l).phone?(d(),h("p",yt,s(t(l).phone),1)):b("",!0)]),e("div",null,[e("label",vt,s(t(i)("home.destinations.destination_form.email")),1),e("div",wt,[c(f,{name:"material-symbols:mail-outline",class:"absolute ltr:left-4 rtl:right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),q(e("input",{id:"email","onUpdate:modelValue":o[6]||(o[6]=a=>t(r).email=a),type:"text",class:V(["w-full px-4 py-3 ltr:pl-12 rtl:pr-12 rounded-xl border focus:ring-2 focus:ring-primary transition-colors"]),placeholder:t(i)("home.destinations.destination_form.email_placeholder")},null,8,kt),[[F,t(r).email]])])]),e("div",null,[e("label",$t,s(t(i)("home.destinations.destination_form.request_details")),1),e("div",Nt,[c(f,{name:"material-symbols:chat-outline",class:"absolute ltr:left-4 rtl:right-4 top-3 w-5 h-5 text-gray-400"}),q(e("textarea",{id:"details","onUpdate:modelValue":o[7]||(o[7]=a=>t(r).details=a),rows:"4",class:"w-full px-4 py-3 ltr:pl-12 rtl:pr-12 rounded-xl border focus:ring-2 focus:ring-primary transition-colors resize-none",placeholder:t(i)("home.destinations.destination_form.request_details_placeholder")},null,8,Ct),[[F,t(r).details]])])]),e("button",{type:"submit",class:V(["w-full rounded-xl bg-primary px-6 py-3.5 text-white font-medium hover:bg-primary-dark transition-colors flex items-center justify-center",{"opacity-70 cursor-not-allowed":t(g)||t(D)}]),disabled:t(g)||t(D)},[t(g)?(d(),h("span",Dt)):b("",!0),v(" "+s(t(i)(t(g)?"common.sending":"home.destinations.destination_form.submit")),1)],10,jt)],32)],64))])])}}}),qt={key:0,class:"flex justify-center items-center min-h-screen"},Ft={class:"sr-only"},Vt={key:1,class:"min-h-screen flex flex-col items-center justify-center px-4 text-center"},Et={class:"text-2xl font-bold text-gray-900 mb-4"},zt={class:"text-gray-600 mb-8"},Bt={key:2,class:"relative min-h-screen"},It={class:"relative h-[40vh] md:h-[60vh] w-full"},Lt={class:"relative z-10 -mt-32 rounded-t-[2.5rem] bg-white px-4 pb-20 pt-12 md:px-8"},Ut={class:"mx-auto max-w-6xl"},At={class:"mb-4 text-4xl font-bold text-gray-900"},Mt={class:"mb-12 text-lg text-gray-600 max-w-3xl"},Wt={key:0,class:"mb-16"},Ht={class:"text-2xl font-semibold mb-6 text-gray-900 flex items-center gap-2"},Ot={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},Pt={class:"relative h-48"},Tt={class:"p-6"},Gt={class:"text-xl font-semibold mb-3 text-gray-900"},Qt={class:"text-gray-600"},Rt={key:1,class:"mb-16"},Zt={class:"text-2xl font-semibold mb-6 text-gray-900 flex items-center gap-2"},Jt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},Kt={key:0,class:"relative h-40 -mx-6 -mt-6 mb-6"},Xt={class:"text-xl font-semibold mb-3 text-gray-900"},Yt={class:"text-gray-600 mb-4"},te={class:"flex items-center text-sm text-gray-500"},ee={class:"bg-gradient-to-br from-primary/5 to-primary/10 rounded-2xl p-6 sm:p-8 md:p-12 text-center"},se={class:"text-2xl sm:text-3xl font-semibold mb-3 sm:mb-4 text-gray-900"},oe={class:"text-gray-600 mb-6 sm:mb-8 max-w-2xl mx-auto text-base sm:text-lg"},ne={class:"flex flex-col sm:flex-row items-center justify-center gap-4"},ae=["href"],he=W({__name:"[id]",async setup(I){let w,i;const C=R(),{t:_,locale:p}=H(),{getWhatsAppUrl:g}=P(),{getDestinationById:j}=tt(),y=k(!1),{data:u,pending:$,error:r}=([w,i]=Z(()=>et(`destination-${C.params.id}`,()=>{const m=j(C.params.id);if(!m)throw Y({statusCode:404,message:"Destination not found"});return m})),w=await w,i(),w),l=N(()=>{var m;return((m=u.value)==null?void 0:m.name[p.value.slice(0,2)])||""}),D=N(()=>{var m;return((m=u.value)==null?void 0:m.description[p.value.slice(0,2)])||""});function E(m){return new Date(m).toLocaleDateString(p.value.slice(0,2),{year:"numeric",month:"long",day:"numeric"})}return J({title:N(()=>u.value?`${u.value.name[p.value.slice(0,2)]} | Wonder Land Agency`:"Loading..."),meta:[{name:"description",content:N(()=>{var m;return((m=u.value)==null?void 0:m.description[p.value.slice(0,2)])||""})}]}),(m,x)=>{var f,S;const z=T,n=G,o=O;return d(),h("div",null,[t($)?(d(),h("div",qt,[x[2]||(x[2]=e("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"},null,-1)),e("span",Ft,s(t(_)("common.loading")),1)])):t(r)?(d(),h("div",Vt,[e("h1",Et,s(t(_)("common.error")),1),e("p",zt,s(t(r).message),1),c(z,{to:"/",class:"rounded-full bg-primary px-6 py-3 text-white hover:bg-primary-dark transition-colors"},{default:K(()=>[v(s(t(_)("common.back_home")),1)]),_:1})])):t(u)?(d(),h("div",Bt,[e("div",It,[c(n,{src:t(u).mainImage,class:"h-full w-full object-cover",alt:l.value,loading:"eager",width:"1920",height:"1080",format:"webp",quality:"90"},null,8,["src","alt"]),x[3]||(x[3]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"},null,-1))]),e("div",Lt,[e("div",Ut,[e("h1",At,s(l.value),1),e("p",Mt,s(D.value),1),(f=t(u).touristSpots)!=null&&f.length?(d(),h("section",Wt,[e("h2",Ht,[c(o,{name:"material-symbols:location-on",class:"h-6 w-6 text-primary"}),v(" "+s(t(_)("home.destinations.tourist_spots")),1)]),e("div",Ot,[(d(!0),h(B,null,M(t(u).touristSpots,a=>{var L;return d(),h("div",{key:a.id,class:"bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100"},[e("div",Pt,[c(n,{src:a.image||((L=t(u).gallery)==null?void 0:L[0])||t(u).mainImage,alt:a.name[t(p).slice(0,2)],class:"w-full h-full object-cover",width:"600",height:"400",format:"webp",quality:"85"},null,8,["src","alt"])]),e("div",Tt,[e("h3",Gt,s(a.name[t(p).slice(0,2)]),1),e("p",Qt,s(a.description[t(p).slice(0,2)]),1)])])}),128))])])):b("",!0),(S=t(u).upcomingEvents)!=null&&S.length?(d(),h("section",Rt,[e("h2",Zt,[c(o,{name:"material-symbols:calendar-month-outline",class:"h-6 w-6 text-primary"}),v(" "+s(t(_)("home.destinations.upcoming_events")),1)]),e("div",Jt,[(d(!0),h(B,null,M(t(u).upcomingEvents,a=>(d(),h("div",{key:a.id,class:"bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 p-6"},[a.image?(d(),h("div",Kt,[c(n,{src:a.image,alt:a.title[t(p).slice(0,2)],class:"w-full h-full object-cover",width:"400",height:"300",format:"webp",quality:"85"},null,8,["src","alt"])])):b("",!0),e("h3",Xt,s(a.title[t(p).slice(0,2)]),1),e("p",Yt,s(a.description[t(p).slice(0,2)]),1),e("div",te,[c(o,{name:"material-symbols:calendar-month-outline",class:"w-5 h-5 mr-2"}),v(" "+s(E(a.date)),1)])]))),128))])])):b("",!0),e("section",ee,[e("h2",se,s(t(_)("home.destinations.plan_your_trip")),1),e("p",oe,s(t(_)("home.destinations.contact_description")),1),e("div",ne,[e("button",{onClick:x[0]||(x[0]=a=>y.value=!0),class:"w-full sm:w-auto rounded-full bg-primary-500 px-6 sm:px-8 py-4 text-white hover:bg-primary-800 transition-colors text-base sm:text-lg font-medium shadow-lg hover:shadow-xl flex items-center justify-center gap-2 min-h-[44px]"},[c(o,{name:"material-symbols:chat",class:"h-5 w-5"}),v(" "+s(t(_)("home.destinations.cta_button")),1)]),y.value?(d(),X(St,{key:0,destinationName:l.value,onClose:x[1]||(x[1]=a=>y.value=!1)},null,8,["destinationName"])):b("",!0),e("a",{href:t(g)(t(_)("whatsapp.messages.destination_interest",{name:l.value})),target:"_blank",rel:"noopener noreferrer",class:"w-full sm:w-auto rounded-full bg-[#25D366] px-6 sm:px-8 py-4 text-white hover:bg-[#128C7E] transition-colors text-base sm:text-lg font-medium shadow-lg hover:shadow-xl flex items-center justify-center gap-2 min-h-[44px]"},[c(o,{name:"logos:whatsapp-icon",class:"w-5 h-5"}),v(" "+s(t(_)("buttons.whatsapp")),1)],8,ae)])])])])])):b("",!0)])}}});export{he as default};
