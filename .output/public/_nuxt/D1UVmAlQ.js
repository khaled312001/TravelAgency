import{e as q,i as r,m as B,s as A,u as I,c as m,o as c,a as t,D as H,b as u,d as M,h as O,E as i,G as p,g as a,Y as h,X as C,O as R,F as z,r as G,t as d,H as P,C as $,n as Q,_ as X}from"./4AaFNmA5.js";const Y={class:"packages-page space-y-4"},J={class:"page-header"},K={class:"header-content"},W={class:"header-right"},Z={class:"filters-section"},tt={class:"filters-container"},et={class:"search-box"},st={class:"filter-controls"},at={class:"packages-grid"},ot={key:0,class:"loading-state"},lt={key:1,class:"empty-state"},it={key:2,class:"packages-list"},nt={class:"package-image"},rt=["src","alt"],dt={class:"package-content"},ct={class:"package-header"},ut={class:"package-title"},pt={class:"package-actions"},mt=["onClick"],vt=["onClick"],ft={class:"package-description"},gt={class:"package-details"},bt={class:"detail-item"},_t={class:"detail-item"},yt={class:"detail-item"},kt={class:"package-footer"},xt={class:"package-price"},Ct={class:"price-value"},wt={class:"package-meta"},Vt={class:"created-date"},ht={class:"modal-header"},Ut={class:"modal-title"},St={class:"form-grid"},Mt={class:"form-group"},Pt={class:"form-group"},$t={class:"form-group"},Dt={class:"form-group"},Et={class:"form-group"},Ft={class:"form-group"},Lt={class:"form-group full-width"},Nt={class:"form-group"},jt={class:"form-group"},Tt={class:"modal-actions"},qt=["disabled"],Bt=q({__name:"index",setup(At){const U=r([]),w=r(!0),f=r(!1),v=r(""),g=r(""),b=r(""),y=r(!1),_=r(!1),k=r(null),l=r({title:"",description:"",destination:"",price:0,duration:0,max_participants:0,category:"domestic",status:"active",image_url:""}),S=B(()=>{let o=U.value;return v.value&&(o=o.filter(e=>e.title.toLowerCase().includes(v.value.toLowerCase())||e.destination.toLowerCase().includes(v.value.toLowerCase()))),g.value&&(o=o.filter(e=>e.status===g.value)),b.value&&(o=o.filter(e=>e.category===b.value)),o}),D=o=>({active:"نشط",inactive:"غير نشط",draft:"مسودة"})[o]||o,E=o=>new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR"}).format(o),F=o=>new Date(o).toLocaleDateString("ar-SA"),V=async()=>{try{w.value=!0;const{data:o}=await $fetch("/api/admin/packages");U.value=o||[]}catch(o){console.error("Error loading packages:",o)}finally{w.value=!1}},L=o=>{k.value=o,l.value={...o},_.value=!0},N=async o=>{if(confirm(`هل أنت متأكد من حذف الباقة "${o.title}"؟`))try{console.log("Delete package:",o.id),await V()}catch(e){console.error("Error deleting package:",e)}},j=async()=>{try{f.value=!0,_.value&&k.value?await $fetch(`/api/admin/packages/${k.value.id}`,{method:"PUT",body:l.value}):await $fetch("/api/admin/packages",{method:"POST",body:l.value}),await V(),x()}catch(o){console.error("Error saving package:",o)}finally{f.value=!1}},x=()=>{y.value=!1,_.value=!1,k.value=null,l.value={title:"",description:"",destination:"",price:0,duration:0,max_participants:0,category:"domestic",status:"active",image_url:""}};return A(()=>{V()}),I({title:"إدارة الباقات - لوحة التحكم"}),(o,e)=>{const n=O;return c(),m("div",Y,[t("div",J,[t("div",K,[e[16]||(e[16]=t("div",{class:"header-left"},[t("h1",{class:"page-title"},"إدارة الباقات"),t("p",{class:"page-subtitle"},"إدارة جميع باقات السفر المتاحة")],-1)),t("div",W,[t("button",{onClick:e[0]||(e[0]=s=>y.value=!0),class:"create-btn"},[u(n,{name:"lucide:plus",class:"btn-icon"}),e[15]||(e[15]=M(" إضافة باقة جديدة "))])])])]),t("div",Z,[t("div",tt,[t("div",et,[u(n,{name:"lucide:search",class:"search-icon"}),i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>h(v)?v.value=s:null),type:"text",placeholder:"البحث في الباقات...",class:"search-input"},null,512),[[p,a(v)]])]),t("div",st,[i(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>h(g)?g.value=s:null),class:"filter-select"},e[17]||(e[17]=[t("option",{value:""},"جميع الحالات",-1),t("option",{value:"active"},"نشط",-1),t("option",{value:"inactive"},"غير نشط",-1),t("option",{value:"draft"},"مسودة",-1)]),512),[[C,a(g)]]),i(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>h(b)?b.value=s:null),class:"filter-select"},e[18]||(e[18]=[R('<option value="" data-v-2f472b55>جميع الفئات</option><option value="domestic" data-v-2f472b55>رحلات داخلية</option><option value="international" data-v-2f472b55>رحلات خارجية</option><option value="umrah" data-v-2f472b55>عمرة</option><option value="hajj" data-v-2f472b55>حج</option>',5)]),512),[[C,a(b)]])])])]),t("div",at,[a(w)?(c(),m("div",ot,e[19]||(e[19]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"جاري تحميل الباقات...",-1)]))):a(S).length===0?(c(),m("div",lt,[u(n,{name:"lucide:package",class:"empty-icon"}),e[20]||(e[20]=t("h3",null,"لا توجد باقات",-1)),e[21]||(e[21]=t("p",null,"لم يتم العثور على أي باقات تطابق معايير البحث",-1)),t("button",{onClick:e[4]||(e[4]=s=>y.value=!0),class:"create-first-btn"}," إضافة أول باقة ")])):(c(),m("div",it,[(c(!0),m(z,null,G(a(S),s=>(c(),m("div",{key:s.id,class:"package-card"},[t("div",nt,[t("img",{src:s.image_url||"/images/placeholder-package.jpg",alt:s.title,class:"package-img"},null,8,rt),t("div",{class:Q(["package-status",s.status])},d(D(s.status)),3)]),t("div",dt,[t("div",ct,[t("h3",ut,d(s.title),1),t("div",pt,[t("button",{onClick:T=>L(s),class:"action-btn edit"},[u(n,{name:"lucide:edit",class:"action-icon"})],8,mt),t("button",{onClick:T=>N(s),class:"action-btn delete"},[u(n,{name:"lucide:trash-2",class:"action-icon"})],8,vt)])]),t("p",ft,d(s.description),1),t("div",gt,[t("div",bt,[u(n,{name:"lucide:map-pin",class:"detail-icon"}),t("span",null,d(s.destination),1)]),t("div",_t,[u(n,{name:"lucide:calendar",class:"detail-icon"}),t("span",null,d(s.duration)+" أيام",1)]),t("div",yt,[u(n,{name:"lucide:users",class:"detail-icon"}),t("span",null,d(s.max_participants)+" أشخاص",1)])]),t("div",kt,[t("div",xt,[e[22]||(e[22]=t("span",{class:"price-label"},"السعر:",-1)),t("span",Ct,d(E(s.price)),1)]),t("div",wt,[t("span",Vt,d(F(s.created_at)),1)])])])]))),128))]))]),a(y)||a(_)?(c(),m("div",{key:0,class:"modal-overlay",onClick:x},[t("div",{class:"modal-content",onClick:e[14]||(e[14]=P(()=>{},["stop"]))},[t("div",ht,[t("h2",Ut,d(a(_)?"تعديل الباقة":"إضافة باقة جديدة"),1),t("button",{onClick:x,class:"modal-close"},[u(n,{name:"lucide:x",class:"close-icon"})])]),t("form",{onSubmit:P(j,["prevent"]),class:"modal-form"},[t("div",St,[t("div",Mt,[e[23]||(e[23]=t("label",{class:"form-label"},"عنوان الباقة *",-1)),i(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>a(l).title=s),type:"text",class:"form-input",required:""},null,512),[[p,a(l).title]])]),t("div",Pt,[e[24]||(e[24]=t("label",{class:"form-label"},"الوجهة *",-1)),i(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>a(l).destination=s),type:"text",class:"form-input",required:""},null,512),[[p,a(l).destination]])]),t("div",$t,[e[25]||(e[25]=t("label",{class:"form-label"},"السعر *",-1)),i(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>a(l).price=s),type:"number",class:"form-input",required:""},null,512),[[p,a(l).price]])]),t("div",Dt,[e[26]||(e[26]=t("label",{class:"form-label"},"المدة (أيام) *",-1)),i(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>a(l).duration=s),type:"number",class:"form-input",required:""},null,512),[[p,a(l).duration]])]),t("div",Et,[e[27]||(e[27]=t("label",{class:"form-label"},"الحد الأقصى للمشاركين",-1)),i(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>a(l).max_participants=s),type:"number",class:"form-input"},null,512),[[p,a(l).max_participants]])]),t("div",Ft,[e[29]||(e[29]=t("label",{class:"form-label"},"الفئة",-1)),i(t("select",{"onUpdate:modelValue":e[10]||(e[10]=s=>a(l).category=s),class:"form-select"},e[28]||(e[28]=[t("option",{value:"domestic"},"رحلات داخلية",-1),t("option",{value:"international"},"رحلات خارجية",-1),t("option",{value:"umrah"},"عمرة",-1),t("option",{value:"hajj"},"حج",-1)]),512),[[C,a(l).category]])]),t("div",Lt,[e[30]||(e[30]=t("label",{class:"form-label"},"الوصف",-1)),i(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=s=>a(l).description=s),class:"form-textarea",rows:"4"},null,512),[[p,a(l).description]])]),t("div",Nt,[e[31]||(e[31]=t("label",{class:"form-label"},"رابط الصورة",-1)),i(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>a(l).image_url=s),type:"url",class:"form-input"},null,512),[[p,a(l).image_url]])]),t("div",jt,[e[33]||(e[33]=t("label",{class:"form-label"},"الحالة",-1)),i(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>a(l).status=s),class:"form-select"},e[32]||(e[32]=[t("option",{value:"active"},"نشط",-1),t("option",{value:"inactive"},"غير نشط",-1),t("option",{value:"draft"},"مسودة",-1)]),512),[[C,a(l).status]])])]),t("div",Tt,[t("button",{type:"button",onClick:x,class:"btn-secondary"}," إلغاء "),t("button",{type:"submit",class:"btn-primary",disabled:a(f)},[a(f)?(c(),$(n,{key:0,name:"lucide:loader-2",class:"btn-icon animate-spin"})):(c(),$(n,{key:1,name:"lucide:save",class:"btn-icon"})),M(" "+d(a(f)?"جاري الحفظ...":"حفظ"),1)],8,qt)])],32)])])):H("",!0)])}}}),Ht=X(Bt,[["__scopeId","data-v-2f472b55"]]);export{Ht as default};
