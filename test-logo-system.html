<!DOCTYPE html>
<html>
<head>
    <title>Test Logo System</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; }
        .logo-preview { max-width: 200px; border: 1px solid #ddd; margin: 10px 0; }
        .status { padding: 10px; margin: 10px 0; border-radius: 4px; }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    </style>
</head>
<body>
    <h1>üß™ Test Logo System</h1>
    
    <div class="test-section">
        <h2>1. Test Settings API</h2>
        <div id="settings-status" class="status">Loading...</div>
        <div id="settings-data"></div>
    </div>
    
    <div class="test-section">
        <h2>2. Test Logo Display</h2>
        <h3>Main Logo:</h3>
        <img id="main-logo" class="logo-preview" alt="Main Logo">
        <div id="main-logo-status" class="status">Loading...</div>
        
        <h3>Footer Logo:</h3>
        <img id="footer-logo" class="logo-preview" alt="Footer Logo">
        <div id="footer-logo-status" class="status">Loading...</div>
    </div>
    
    <div class="test-section">
        <h2>3. Test Upload Directory Access</h2>
        <div id="upload-status" class="status">Testing...</div>
    </div>
    
    <script>
        async function testSettingsAPI() {
            try {
                const response = await fetch('/api/settings');
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('settings-status').innerHTML = 
                        '<div class="success">‚úÖ Settings API working</div>';
                    document.getElementById('settings-data').innerHTML = 
                        '<pre>' + JSON.stringify(data.data.logo, null, 2) + '</pre>';
                    
                    // Update logo images
                    const mainLogo = data.data.logo.mainLogo;
                    const footerLogo = data.data.logo.footerLogo;
                    
                    document.getElementById('main-logo').src = mainLogo;
                    document.getElementById('footer-logo').src = footerLogo;
                    
                    // Test logo loading
                    testLogoLoading('main-logo', mainLogo);
                    testLogoLoading('footer-logo', footerLogo);
                    
                } else {
                    document.getElementById('settings-status').innerHTML = 
                        '<div class="error">‚ùå Settings API failed: ' + data.message + '</div>';
                }
            } catch (error) {
                document.getElementById('settings-status').innerHTML = 
                    '<div class="error">‚ùå Settings API error: ' + error.message + '</div>';
            }
        }
        
        function testLogoLoading(logoId, logoUrl) {
            const img = document.getElementById(logoId);
            const statusId = logoId + '-status';
            
            img.onload = function() {
                document.getElementById(statusId).innerHTML = 
                    '<div class="success">‚úÖ ' + logoId + ' loaded successfully</div>';
            };
            
            img.onerror = function() {
                document.getElementById(statusId).innerHTML = 
                    '<div class="error">‚ùå ' + logoId + ' failed to load: ' + logoUrl + '</div>';
            };
        }
        
        async function testUploadDirectory() {
            try {
                const response = await fetch('/uploads/logos/test-logo.png');
                if (response.ok) {
                    document.getElementById('upload-status').innerHTML = 
                        '<div class="success">‚úÖ Upload directory accessible</div>';
                } else {
                    document.getElementById('upload-status').innerHTML = 
                        '<div class="error">‚ùå Upload directory not accessible: ' + response.status + '</div>';
                }
            } catch (error) {
                document.getElementById('upload-status').innerHTML = 
                    '<div class="error">‚ùå Upload directory error: ' + error.message + '</div>';
            }
        }
        
        // Run tests
        testSettingsAPI();
        testUploadDirectory();
    </script>
</body>
</html>
