import{H as a,q as t,s}from"./server.mjs";import{defineComponent as e,ref as i,computed as d,mergeProps as l,unref as n,useSSRContext as v}from"vue";import{ssrRenderAttrs as c,ssrRenderComponent as f,ssrInterpolate as o,ssrRenderAttr as r,ssrIncludeBooleanAttr as u,ssrLooseContain as p,ssrLooseEqual as m,ssrRenderList as h,ssrRenderClass as b}from"vue/server-renderer";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@iconify/utils";import"node:crypto";import"consola";import"node:module";import"node:url";import"ipx";import"node:fs";import"node:path";import"vue-router";import"@supabase/ssr";import"@iconify/vue";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"unhead/utils";import"devalue";import"unhead/plugins";import"@unhead/schema-org";import"@unhead/schema-org/vue";import"floating-vue";import"@iconify/utils/lib/css/icon";const g=e({__name:"index",__ssrInlineRender:!0,setup(s){const e=i([]),v=i(!0),g=i(""),y=i(""),$=i(""),x=i(""),A=i(!1),_=i(null),w=d((()=>{let a=e.value;return g.value&&(a=a.filter((a=>a.title.toLowerCase().includes(g.value.toLowerCase())||a.message.toLowerCase().includes(g.value.toLowerCase())))),y.value&&(a=a.filter((a=>a.status===y.value))),$.value&&(a=a.filter((a=>a.type===$.value))),x.value&&(a=a.filter((a=>a.created_at.startsWith(x.value)))),a})),S=d((()=>e.value.length)),C=d((()=>e.value.filter((a=>"unread"===a.status)).length)),D=d((()=>e.value.filter((a=>"read"===a.status)).length)),j=d((()=>{const a=(new Date).toISOString().slice(0,10);return e.value.filter((t=>t.created_at.startsWith(a))).length})),L=a=>({booking:"حجز جديد",message:"رسالة جديدة",system:"نظام",alert:"تنبيه"}[a]||a),k=a=>({booking:"lucide:calendar",message:"lucide:mail",system:"lucide:settings",alert:"lucide:alert-triangle"}[a]||"lucide:bell");return a({title:"الإشعارات - لوحة التحكم"}),(a,s,e,i)=>{var d,I;const W=t;s(`<div${c(l({class:"notifications-page space-y-4"},i))} data-v-1f22fa90><div class="page-header" data-v-1f22fa90><div class="header-content" data-v-1f22fa90><div class="header-left" data-v-1f22fa90><h1 class="page-title" data-v-1f22fa90>الإشعارات</h1><p class="page-subtitle" data-v-1f22fa90>إدارة جميع الإشعارات والتنبيهات</p></div><div class="header-right" data-v-1f22fa90><button class="mark-read-btn" data-v-1f22fa90>`),s(f(W,{name:"lucide:check",class:"btn-icon"},null,e)),s(' تعيين الكل كمقروء </button></div></div></div><div class="stats-grid" data-v-1f22fa90><div class="stat-card" data-v-1f22fa90><div class="stat-icon" data-v-1f22fa90>'),s(f(W,{name:"lucide:bell",class:"icon"},null,e)),s(`</div><div class="stat-content" data-v-1f22fa90><p class="stat-value" data-v-1f22fa90>${o(n(S))}</p><p class="stat-label" data-v-1f22fa90>إجمالي الإشعارات</p></div></div><div class="stat-card" data-v-1f22fa90><div class="stat-icon" data-v-1f22fa90>`),s(f(W,{name:"lucide:bell-ring",class:"icon"},null,e)),s(`</div><div class="stat-content" data-v-1f22fa90><p class="stat-value" data-v-1f22fa90>${o(n(C))}</p><p class="stat-label" data-v-1f22fa90>غير مقروء</p></div></div><div class="stat-card" data-v-1f22fa90><div class="stat-icon" data-v-1f22fa90>`),s(f(W,{name:"lucide:mail-open",class:"icon"},null,e)),s(`</div><div class="stat-content" data-v-1f22fa90><p class="stat-value" data-v-1f22fa90>${o(n(D))}</p><p class="stat-label" data-v-1f22fa90>مقروء</p></div></div><div class="stat-card" data-v-1f22fa90><div class="stat-icon" data-v-1f22fa90>`),s(f(W,{name:"lucide:calendar",class:"icon"},null,e)),s(`</div><div class="stat-content" data-v-1f22fa90><p class="stat-value" data-v-1f22fa90>${o(n(j))}</p><p class="stat-label" data-v-1f22fa90>اليوم</p></div></div></div><div class="filters-section" data-v-1f22fa90><div class="filters-container" data-v-1f22fa90><div class="search-box" data-v-1f22fa90>`),s(f(W,{name:"lucide:search",class:"search-icon"},null,e)),s(`<input${r("value",n(g))} type="text" placeholder="البحث في الإشعارات..." class="search-input" data-v-1f22fa90></div><div class="filter-controls" data-v-1f22fa90><select class="filter-select" data-v-1f22fa90><option value="" data-v-1f22fa90${u(Array.isArray(n(y))?p(n(y),""):m(n(y),""))?" selected":""}>جميع الحالات</option><option value="unread" data-v-1f22fa90${u(Array.isArray(n(y))?p(n(y),"unread"):m(n(y),"unread"))?" selected":""}>غير مقروء</option><option value="read" data-v-1f22fa90${u(Array.isArray(n(y))?p(n(y),"read"):m(n(y),"read"))?" selected":""}>مقروء</option></select><select class="filter-select" data-v-1f22fa90><option value="" data-v-1f22fa90${u(Array.isArray(n($))?p(n($),""):m(n($),""))?" selected":""}>جميع الأنواع</option><option value="booking" data-v-1f22fa90${u(Array.isArray(n($))?p(n($),"booking"):m(n($),"booking"))?" selected":""}>حجز جديد</option><option value="message" data-v-1f22fa90${u(Array.isArray(n($))?p(n($),"message"):m(n($),"message"))?" selected":""}>رسالة جديدة</option><option value="system" data-v-1f22fa90${u(Array.isArray(n($))?p(n($),"system"):m(n($),"system"))?" selected":""}>نظام</option><option value="alert" data-v-1f22fa90${u(Array.isArray(n($))?p(n($),"alert"):m(n($),"alert"))?" selected":""}>تنبيه</option></select><input${r("value",n(x))} type="date" class="filter-select" placeholder="تاريخ الإشعار" data-v-1f22fa90></div></div></div><div class="notifications-container" data-v-1f22fa90>`),n(v)?s('<div class="loading-state" data-v-1f22fa90><div class="loading-spinner" data-v-1f22fa90></div><p data-v-1f22fa90>جاري تحميل الإشعارات...</p></div>'):0===n(w).length?(s('<div class="empty-state" data-v-1f22fa90>'),s(f(W,{name:"lucide:bell-off",class:"empty-icon"},null,e)),s("<h3 data-v-1f22fa90>لا توجد إشعارات</h3><p data-v-1f22fa90>لم يتم العثور على أي إشعارات تطابق معايير البحث</p></div>")):(s('<div class="notifications-list" data-v-1f22fa90>\x3c!--[--\x3e'),h(n(w),(a=>{s(`<div class="${b([{unread:"unread"===a.status},"notification-card"])}" data-v-1f22fa90><div class="notification-icon" data-v-1f22fa90>`),s(f(W,{name:k(a.type),class:"icon"},null,e)),s(`</div><div class="notification-content" data-v-1f22fa90><div class="notification-header" data-v-1f22fa90><h3 class="notification-title" data-v-1f22fa90>${o(a.title)}</h3><div class="notification-meta" data-v-1f22fa90><span class="${b([a.type,"notification-type"])}" data-v-1f22fa90>${o(L(a.type))}</span><span class="notification-date" data-v-1f22fa90>${o((a=>new Date(a).toLocaleDateString("ar-SA"))(a.created_at))}</span></div></div><p class="notification-message" data-v-1f22fa90>${o(a.message)}</p>`),a.data?(s('<div class="notification-data" data-v-1f22fa90>'),a.data.booking_id?s(`<div class="data-item" data-v-1f22fa90><span class="data-label" data-v-1f22fa90>رقم الحجز:</span><span class="data-value" data-v-1f22fa90>#${o(a.data.booking_id)}</span></div>`):s("\x3c!----\x3e"),a.data.customer_name?s(`<div class="data-item" data-v-1f22fa90><span class="data-label" data-v-1f22fa90>العميل:</span><span class="data-value" data-v-1f22fa90>${o(a.data.customer_name)}</span></div>`):s("\x3c!----\x3e"),s("</div>")):s("\x3c!----\x3e"),s(`</div><div class="notification-actions" data-v-1f22fa90><button class="${b([{read:"read"===a.status},"action-btn status"])}" data-v-1f22fa90>`),s(f(W,{name:"read"===a.status?"lucide:mail-open":"lucide:mail",class:"action-icon"},null,e)),s('</button><button class="action-btn delete" data-v-1f22fa90>'),s(f(W,{name:"lucide:trash-2",class:"action-icon"},null,e)),s("</button></div></div>")})),s("\x3c!--]--\x3e</div>")),s("</div>"),n(A)?(s('<div class="modal-overlay" data-v-1f22fa90><div class="modal-content" data-v-1f22fa90><div class="modal-header" data-v-1f22fa90><h2 class="modal-title" data-v-1f22fa90>تفاصيل الإشعار</h2><button class="modal-close" data-v-1f22fa90>'),s(f(W,{name:"lucide:x",class:"close-icon"},null,e)),s("</button></div>"),n(_)?(s('<div class="modal-body" data-v-1f22fa90><div class="notification-details" data-v-1f22fa90><div class="detail-header" data-v-1f22fa90><div class="detail-icon" data-v-1f22fa90>'),s(f(W,{name:k(n(_).type),class:"icon-large"},null,e)),s(`</div><div class="detail-info" data-v-1f22fa90><h3 class="detail-title" data-v-1f22fa90>${o(n(_).title)}</h3><div class="detail-meta" data-v-1f22fa90><span class="${b([n(_).type,"detail-type"])}" data-v-1f22fa90>${o(L(n(_).type))}</span><span class="detail-date" data-v-1f22fa90>${o((a=>new Date(a).toLocaleString("ar-SA"))(n(_).created_at))}</span></div></div></div><div class="detail-content" data-v-1f22fa90><h4 class="content-title" data-v-1f22fa90>الرسالة</h4><p class="content-message" data-v-1f22fa90>${o(n(_).message)}</p></div>`),n(_).data?(s('<div class="detail-data" data-v-1f22fa90><h4 class="data-title" data-v-1f22fa90>البيانات الإضافية</h4><div class="data-items" data-v-1f22fa90>\x3c!--[--\x3e'),h(n(_).data,((a,t)=>{s(`<div class="data-item" data-v-1f22fa90><span class="data-label" data-v-1f22fa90>${o((a=>({booking_id:"رقم الحجز",customer_name:"اسم العميل",amount:"المبلغ",status:"الحالة"}[a]||a))(t))}:</span><span class="data-value" data-v-1f22fa90>${o(a)}</span></div>`)})),s("\x3c!--]--\x3e</div></div>")):s("\x3c!----\x3e"),s("</div></div>")):s("\x3c!----\x3e"),s('<div class="modal-actions" data-v-1f22fa90><button class="btn-secondary" data-v-1f22fa90> إغلاق </button><button class="btn-primary" data-v-1f22fa90>'),s(f(W,{name:"read"===(null==(d=n(_))?void 0:d.status)?"lucide:mail":"lucide:mail-open",class:"btn-icon"},null,e)),s(` ${o((null==(I=n(_))||I.status,"تعيين كمقروء"))}</button></div></div></div>`)):s("\x3c!----\x3e"),s("</div>")}}}),y=g.setup;g.setup=(a,t)=>{const s=v();return(s.modules||(s.modules=new Set)).add("pages/admin/notifications/index.vue"),y?y(a,t):void 0};const $=s(g,[["__scopeId","data-v-1f22fa90"]]);export{$ as default};
//# sourceMappingURL=index.vue13.mjs.map
