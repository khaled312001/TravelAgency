{"version":3,"file":"charts.get.mjs","sources":["../../../../../../../../../server/api/admin/dashboard/charts.get.ts"],"sourcesContent":null,"names":["charts_get","defineEventHandler","async","event","authHeader","getHeader","startsWith","createError","statusCode","statusMessage","sessionToken","substring","supabaseUrl","supabaseServiceKey","supabase","createClient","data","session","error","from","select","eq","single","now","Date","expiresAt","expires_at","verifyAdminAuth","bookings","bookingsError","bookingDistribution","type","count","percentage","color","forEach","booking","destination","_b","_a","packages","toLowerCase","includes","totalBookings","reduce","sum","item","Math","round","monthlySales","months","i","date","setMonth","getMonth","startOfMonth","getFullYear","endOfMonth","monthBookings","monthError","gte","toISOString","lte","totalAmount","total_price","push","month","amount","length","console"],"mappings":"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"}