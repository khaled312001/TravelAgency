{"version":3,"file":"login.post.mjs","sources":["../../../../../../../../../server/api/admin/auth/login.post.ts"],"sourcesContent":null,"names":["login_post","defineEventHandler","async","event","body","readBody","email","password","createError","statusCode","statusMessage","supabase","createClient","console","log","toLowerCase","data","adminUser","error","userError","from","select","eq","single","bcrypt","compare","password_hash","sessionToken","jwt","sign","id","role","process","env","JWT_SECRET","expiresIn","expiresAt","Date","setHours","getHours","sessionError","insert","admin_user_id","session_token","expires_at","toISOString","update","last_login","action","ip_address","user_agent","getHeader","userWithoutPassword","success","user","message","stack"],"mappings":"iZAKA,MAAAA,EAAAC,GAAAC,MAAAC,IACA,IACA,MAAAC,QAAAC,EAAAF,IACAG,MAAAA,EAAAC,SAAAA,GAAAH,EAEA,IAAAE,IAAAC,EACA,MAAAC,EAAA,CACAC,WAAA,IACAC,cAAA,oCAKA,MAEAC,EAAAC,EAFA,2CACA,+NAIAC,QAAAC,IAAA,uCAAAR,EAAAS,eACA,MAAAC,KAAAC,EAAAC,MAAAC,SAAAR,EACAS,KAAA,eACAC,OAAA,KACAC,GAAA,QAAAhB,EAAAS,eACAO,GAAA,aAAA,GACAC,SAIA,GAFAV,QAAAC,IAAA,2BAAA,CAAAG,YAAAE,cAEAA,IAAAF,EAEA,MADAJ,QAAAC,IAAA,gCAAAK,GACAX,EAAA,CACAC,WAAA,IACAC,cAAA,wBAMA,UADAc,EAAAC,QAAAlB,EAAAU,EAAAS,eAEA,MAAAlB,EAAA,CACAC,WAAA,IACAC,cAAA,wBAKA,MAAAiB,EAAAC,EAAAC,KACA,CACAC,GAAAb,EAAAa,GACAC,KAAAd,EAAAc,MAEAC,QAAAC,IAAAC,YAAA,kBACA,CAAAC,UAAA,QAIAC,MAAAC,KACAD,EAAAE,SAAAF,EAAAG,WAAA,IAEA,MAAArB,MAAAsB,SAAA7B,EACAS,KAAA,kBACAqB,OAAA,CACAC,cAAAzB,EAAAa,GACAa,cAAAhB,EACAiB,WAAAR,EAAAS,gBAGAL,GACA3B,QAAAK,MAAA,0BAAAsB,SAIA7B,EACAS,KAAA,eACA0B,OAAA,CAAAC,YAAA,IAAAV,MAAAQ,gBACAvB,GAAA,KAAAL,EAAAa,UAGAnB,EACAS,KAAA,uBACAqB,OAAA,CACAC,cAAAzB,EAAAa,GACAkB,OAAA,QACAC,WAAA,YACAC,WAAAC,EAAAhD,EAAA,eAAA,YAIA,MAAAuB,cAAAA,KAAA0B,GAAAnC,EAEA,MAAA,CACAoC,SAAA,EACAC,KAAAF,EACAzB,sBAEAT,GAKA,GAJAL,QAAAK,MAAA,eAAAA,GACAL,QAAAK,MAAA,iBAAAA,EAAAqC,SACA1C,QAAAK,MAAA,eAAAA,EAAAsC,OAEAtC,EAAAT,WACA,MAAAS,EAGA,MAAAV,EAAA,CACAC,WAAA,IACAC,cAAA,yBACA"}