import{H as a,q as d,s as e}from"./server.mjs";import{defineComponent as t,ref as s,computed as l,mergeProps as b,unref as i,useSSRContext as v}from"vue";import{ssrRenderAttrs as c,ssrRenderComponent as o,ssrInterpolate as r,ssrRenderAttr as n,ssrIncludeBooleanAttr as u,ssrLooseContain as p,ssrLooseEqual as m,ssrRenderList as h,ssrRenderClass as f}from"vue/server-renderer";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@iconify/utils";import"node:crypto";import"consola";import"node:module";import"node:url";import"ipx";import"node:fs";import"node:path";import"vue-router";import"@supabase/ssr";import"@iconify/vue";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"unhead/utils";import"devalue";import"unhead/plugins";import"@unhead/schema-org";import"@unhead/schema-org/vue";import"floating-vue";import"@iconify/utils/lib/css/icon";const y=t({__name:"index",__ssrInlineRender:!0,setup(e){const t=s([]),v=s(!0),y=s(!1),$=s(""),g=s(""),A=s(""),x=s(""),_=s(!1),w=s(!1),S=s(!1),q=s(null);s(null);const C=s({name:"",email:"",password:"",phone:"",role:"user",status:"active"}),I=l((()=>{let a=t.value;return $.value&&(a=a.filter((a=>a.name.toLowerCase().includes($.value.toLowerCase())||a.email.toLowerCase().includes($.value.toLowerCase())))),g.value&&(a=a.filter((a=>a.status===g.value))),A.value&&(a=a.filter((a=>a.role===A.value))),x.value&&(a=a.filter((a=>a.created_at.startsWith(x.value)))),a})),j=l((()=>t.value.length)),k=l((()=>t.value.filter((a=>"active"===a.status)).length)),W=l((()=>{const a=(new Date).toISOString().slice(0,7);return t.value.filter((d=>d.created_at.startsWith(a))).length})),O=l((()=>t.value.filter((a=>"admin"===a.role)).length)),L=a=>({active:"نشط",inactive:"غير نشط",suspended:"معلق"}[a]||a),M=a=>({admin:"مدير",moderator:"مشرف",user:"مستخدم"}[a]||a),D=a=>new Date(a).toLocaleDateString("ar-SA"),R=a=>new Date(a).toLocaleString("ar-SA");return a({title:"إدارة المستخدمين - لوحة التحكم"}),(a,e,t,s)=>{const l=d;e(`<div${c(b({class:"users-page space-y-4"},s))} data-v-ed938bbd><div class="page-header" data-v-ed938bbd><div class="header-content" data-v-ed938bbd><div class="header-left" data-v-ed938bbd><h1 class="page-title" data-v-ed938bbd>إدارة المستخدمين</h1><p class="page-subtitle" data-v-ed938bbd>إدارة حسابات المستخدمين والصلاحيات</p></div><div class="header-right" data-v-ed938bbd><button class="create-btn" data-v-ed938bbd>`),e(o(l,{name:"lucide:plus",class:"btn-icon"},null,t)),e(' إضافة مستخدم جديد </button></div></div></div><div class="stats-grid" data-v-ed938bbd><div class="stat-card" data-v-ed938bbd><div class="stat-icon" data-v-ed938bbd>'),e(o(l,{name:"lucide:users",class:"icon"},null,t)),e(`</div><div class="stat-content" data-v-ed938bbd><p class="stat-value" data-v-ed938bbd>${r(i(j))}</p><p class="stat-label" data-v-ed938bbd>إجمالي المستخدمين</p></div></div><div class="stat-card" data-v-ed938bbd><div class="stat-icon" data-v-ed938bbd>`),e(o(l,{name:"lucide:user-check",class:"icon"},null,t)),e(`</div><div class="stat-content" data-v-ed938bbd><p class="stat-value" data-v-ed938bbd>${r(i(k))}</p><p class="stat-label" data-v-ed938bbd>المستخدمين النشطين</p></div></div><div class="stat-card" data-v-ed938bbd><div class="stat-icon" data-v-ed938bbd>`),e(o(l,{name:"lucide:user-plus",class:"icon"},null,t)),e(`</div><div class="stat-content" data-v-ed938bbd><p class="stat-value" data-v-ed938bbd>${r(i(W))}</p><p class="stat-label" data-v-ed938bbd>جدد هذا الشهر</p></div></div><div class="stat-card" data-v-ed938bbd><div class="stat-icon" data-v-ed938bbd>`),e(o(l,{name:"lucide:shield",class:"icon"},null,t)),e(`</div><div class="stat-content" data-v-ed938bbd><p class="stat-value" data-v-ed938bbd>${r(i(O))}</p><p class="stat-label" data-v-ed938bbd>المديرين</p></div></div></div><div class="filters-section" data-v-ed938bbd><div class="filters-container" data-v-ed938bbd><div class="search-box" data-v-ed938bbd>`),e(o(l,{name:"lucide:search",class:"search-icon"},null,t)),e(`<input${n("value",i($))} type="text" placeholder="البحث في المستخدمين..." class="search-input" data-v-ed938bbd></div><div class="filter-controls" data-v-ed938bbd><select class="filter-select" data-v-ed938bbd><option value="" data-v-ed938bbd${u(Array.isArray(i(g))?p(i(g),""):m(i(g),""))?" selected":""}>جميع الحالات</option><option value="active" data-v-ed938bbd${u(Array.isArray(i(g))?p(i(g),"active"):m(i(g),"active"))?" selected":""}>نشط</option><option value="inactive" data-v-ed938bbd${u(Array.isArray(i(g))?p(i(g),"inactive"):m(i(g),"inactive"))?" selected":""}>غير نشط</option><option value="suspended" data-v-ed938bbd${u(Array.isArray(i(g))?p(i(g),"suspended"):m(i(g),"suspended"))?" selected":""}>معلق</option></select><select class="filter-select" data-v-ed938bbd><option value="" data-v-ed938bbd${u(Array.isArray(i(A))?p(i(A),""):m(i(A),""))?" selected":""}>جميع الأدوار</option><option value="admin" data-v-ed938bbd${u(Array.isArray(i(A))?p(i(A),"admin"):m(i(A),"admin"))?" selected":""}>مدير</option><option value="user" data-v-ed938bbd${u(Array.isArray(i(A))?p(i(A),"user"):m(i(A),"user"))?" selected":""}>مستخدم</option><option value="moderator" data-v-ed938bbd${u(Array.isArray(i(A))?p(i(A),"moderator"):m(i(A),"moderator"))?" selected":""}>مشرف</option></select><input${n("value",i(x))} type="date" class="filter-select" placeholder="تاريخ التسجيل" data-v-ed938bbd></div></div></div><div class="users-table-container" data-v-ed938bbd>`),i(v)?e('<div class="loading-state" data-v-ed938bbd><div class="loading-spinner" data-v-ed938bbd></div><p data-v-ed938bbd>جاري تحميل المستخدمين...</p></div>'):0===i(I).length?(e('<div class="empty-state" data-v-ed938bbd>'),e(o(l,{name:"lucide:users",class:"empty-icon"},null,t)),e('<h3 data-v-ed938bbd>لا توجد مستخدمين</h3><p data-v-ed938bbd>لم يتم العثور على أي مستخدمين تطابق معايير البحث</p><button class="create-first-btn" data-v-ed938bbd> إضافة أول مستخدم </button></div>')):(e('<div class="users-table" data-v-ed938bbd><table class="table" data-v-ed938bbd><thead class="table-header" data-v-ed938bbd><tr data-v-ed938bbd><th class="table-cell" data-v-ed938bbd>المستخدم</th><th class="table-cell" data-v-ed938bbd>البريد الإلكتروني</th><th class="table-cell" data-v-ed938bbd>الدور</th><th class="table-cell" data-v-ed938bbd>الحالة</th><th class="table-cell" data-v-ed938bbd>تاريخ التسجيل</th><th class="table-cell" data-v-ed938bbd>آخر نشاط</th><th class="table-cell" data-v-ed938bbd>الإجراءات</th></tr></thead><tbody class="table-body" data-v-ed938bbd>\x3c!--[--\x3e'),h(i(I),(a=>{e('<tr class="table-row" data-v-ed938bbd><td class="table-cell" data-v-ed938bbd><div class="user-info" data-v-ed938bbd><div class="user-avatar" data-v-ed938bbd>'),a.avatar_url?e(`<img${n("src",a.avatar_url)}${n("alt",a.name)} class="avatar-img" data-v-ed938bbd>`):e(o(l,{name:"lucide:user",class:"avatar-icon"},null,t)),e(`</div><div class="user-details" data-v-ed938bbd><p class="user-name" data-v-ed938bbd>${r(a.name)}</p><p class="user-id" data-v-ed938bbd>ID: ${r(a.id.slice(-8))}</p></div></div></td><td class="table-cell" data-v-ed938bbd><span class="user-email" data-v-ed938bbd>${r(a.email)}</span></td><td class="table-cell" data-v-ed938bbd><span class="${f([a.role,"role-badge"])}" data-v-ed938bbd>${r(M(a.role))}</span></td><td class="table-cell" data-v-ed938bbd><span class="${f([a.status,"status-badge"])}" data-v-ed938bbd>${r(L(a.status))}</span></td><td class="table-cell" data-v-ed938bbd><span class="registration-date" data-v-ed938bbd>${r(D(a.created_at))}</span></td><td class="table-cell" data-v-ed938bbd><span class="last-activity" data-v-ed938bbd>${r(D(a.last_login))}</span></td><td class="table-cell" data-v-ed938bbd><div class="action-buttons" data-v-ed938bbd><button class="action-btn view" data-v-ed938bbd>`),e(o(l,{name:"lucide:eye",class:"action-icon"},null,t)),e('</button><button class="action-btn edit" data-v-ed938bbd>'),e(o(l,{name:"lucide:edit",class:"action-icon"},null,t)),e('</button><button class="action-btn status" data-v-ed938bbd>'),e(o(l,{name:"active"===a.status?"lucide:user-x":"lucide:user-check",class:"action-icon"},null,t)),e('</button><button class="action-btn delete" data-v-ed938bbd>'),e(o(l,{name:"lucide:trash-2",class:"action-icon"},null,t)),e("</button></div></td></tr>")})),e("\x3c!--]--\x3e</tbody></table></div>")),e("</div>"),i(_)?(e('<div class="modal-overlay" data-v-ed938bbd><div class="modal-content large" data-v-ed938bbd><div class="modal-header" data-v-ed938bbd><h2 class="modal-title" data-v-ed938bbd>تفاصيل المستخدم</h2><button class="modal-close" data-v-ed938bbd>'),e(o(l,{name:"lucide:x",class:"close-icon"},null,t)),e("</button></div>"),i(q)?(e('<div class="modal-body" data-v-ed938bbd><div class="user-profile" data-v-ed938bbd><div class="profile-header" data-v-ed938bbd><div class="profile-avatar" data-v-ed938bbd>'),i(q).avatar_url?e(`<img${n("src",i(q).avatar_url)}${n("alt",i(q).name)} class="avatar-large" data-v-ed938bbd>`):e(o(l,{name:"lucide:user",class:"avatar-icon-large"},null,t)),e(`</div><div class="profile-info" data-v-ed938bbd><h3 class="profile-name" data-v-ed938bbd>${r(i(q).name)}</h3><p class="profile-email" data-v-ed938bbd>${r(i(q).email)}</p><div class="profile-badges" data-v-ed938bbd><span class="${f([i(q).role,"role-badge"])}" data-v-ed938bbd>${r(M(i(q).role))}</span><span class="${f([i(q).status,"status-badge"])}" data-v-ed938bbd>${r(L(i(q).status))}</span></div></div></div><div class="profile-details" data-v-ed938bbd><div class="detail-section" data-v-ed938bbd><h4 class="section-title" data-v-ed938bbd>معلومات الحساب</h4><div class="detail-items" data-v-ed938bbd><div class="detail-item" data-v-ed938bbd><span class="detail-label" data-v-ed938bbd>معرف المستخدم:</span><span class="detail-value" data-v-ed938bbd>${r(i(q).id)}</span></div><div class="detail-item" data-v-ed938bbd><span class="detail-label" data-v-ed938bbd>تاريخ التسجيل:</span><span class="detail-value" data-v-ed938bbd>${r(R(i(q).created_at))}</span></div><div class="detail-item" data-v-ed938bbd><span class="detail-label" data-v-ed938bbd>آخر تسجيل دخول:</span><span class="detail-value" data-v-ed938bbd>${r(R(i(q).last_login))}</span></div><div class="detail-item" data-v-ed938bbd><span class="detail-label" data-v-ed938bbd>عدد الحجوزات:</span><span class="detail-value" data-v-ed938bbd>${r(i(q).bookings_count||0)}</span></div></div></div>`),i(q).phone?e(`<div class="detail-section" data-v-ed938bbd><h4 class="section-title" data-v-ed938bbd>معلومات التواصل</h4><div class="detail-items" data-v-ed938bbd><div class="detail-item" data-v-ed938bbd><span class="detail-label" data-v-ed938bbd>رقم الهاتف:</span><span class="detail-value" data-v-ed938bbd>${r(i(q).phone)}</span></div></div></div>`):e("\x3c!----\x3e"),e("</div></div></div>")):e("\x3c!----\x3e"),e('<div class="modal-actions" data-v-ed938bbd><button class="btn-secondary" data-v-ed938bbd> إغلاق </button><button class="btn-primary" data-v-ed938bbd>'),e(o(l,{name:"lucide:edit",class:"btn-icon"},null,t)),e(" تعديل المستخدم </button></div></div></div>")):e("\x3c!----\x3e"),i(w)||i(S)?(e(`<div class="modal-overlay" data-v-ed938bbd><div class="modal-content" data-v-ed938bbd><div class="modal-header" data-v-ed938bbd><h2 class="modal-title" data-v-ed938bbd>${r(i(S)?"تعديل المستخدم":"إضافة مستخدم جديد")}</h2><button class="modal-close" data-v-ed938bbd>`),e(o(l,{name:"lucide:x",class:"close-icon"},null,t)),e(`</button></div><form class="modal-form" data-v-ed938bbd><div class="form-grid" data-v-ed938bbd><div class="form-group" data-v-ed938bbd><label class="form-label" data-v-ed938bbd>الاسم *</label><input${n("value",i(C).name)} type="text" class="form-input" required data-v-ed938bbd></div><div class="form-group" data-v-ed938bbd><label class="form-label" data-v-ed938bbd>البريد الإلكتروني *</label><input${n("value",i(C).email)} type="email" class="form-input" required data-v-ed938bbd></div><div class="form-group" data-v-ed938bbd><label class="form-label" data-v-ed938bbd>كلمة المرور ${r(i(S)?"(اتركها فارغة للحفاظ على الكلمة الحالية)":"*")}</label><input${n("value",i(C).password)} type="password" class="form-input"${u(!i(S))?" required":""} data-v-ed938bbd></div><div class="form-group" data-v-ed938bbd><label class="form-label" data-v-ed938bbd>رقم الهاتف</label><input${n("value",i(C).phone)} type="tel" class="form-input" data-v-ed938bbd></div><div class="form-group" data-v-ed938bbd><label class="form-label" data-v-ed938bbd>الدور *</label><select class="form-select" required data-v-ed938bbd><option value="user" data-v-ed938bbd${u(Array.isArray(i(C).role)?p(i(C).role,"user"):m(i(C).role,"user"))?" selected":""}>مستخدم</option><option value="moderator" data-v-ed938bbd${u(Array.isArray(i(C).role)?p(i(C).role,"moderator"):m(i(C).role,"moderator"))?" selected":""}>مشرف</option><option value="admin" data-v-ed938bbd${u(Array.isArray(i(C).role)?p(i(C).role,"admin"):m(i(C).role,"admin"))?" selected":""}>مدير</option></select></div><div class="form-group" data-v-ed938bbd><label class="form-label" data-v-ed938bbd>الحالة</label><select class="form-select" data-v-ed938bbd><option value="active" data-v-ed938bbd${u(Array.isArray(i(C).status)?p(i(C).status,"active"):m(i(C).status,"active"))?" selected":""}>نشط</option><option value="inactive" data-v-ed938bbd${u(Array.isArray(i(C).status)?p(i(C).status,"inactive"):m(i(C).status,"inactive"))?" selected":""}>غير نشط</option><option value="suspended" data-v-ed938bbd${u(Array.isArray(i(C).status)?p(i(C).status,"suspended"):m(i(C).status,"suspended"))?" selected":""}>معلق</option></select></div></div><div class="modal-actions" data-v-ed938bbd><button type="button" class="btn-secondary" data-v-ed938bbd> إلغاء </button><button type="submit" class="btn-primary"${u(i(y))?" disabled":""} data-v-ed938bbd>`),i(y)?e(o(l,{name:"lucide:loader-2",class:"btn-icon animate-spin"},null,t)):e(o(l,{name:"lucide:save",class:"btn-icon"},null,t)),e(` ${r(i(y)?"جاري الحفظ...":"حفظ")}</button></div></form></div></div>`)):e("\x3c!----\x3e"),e("</div>")}}}),$=y.setup;y.setup=(a,d)=>{const e=v();return(e.modules||(e.modules=new Set)).add("pages/admin/users/index.vue"),$?$(a,d):void 0};const g=e(y,[["__scopeId","data-v-ed938bbd"]]);export{g as default};
//# sourceMappingURL=index.vue5.mjs.map
