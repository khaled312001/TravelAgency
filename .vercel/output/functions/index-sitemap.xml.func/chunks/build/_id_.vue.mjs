import{M as e}from"./nuxt-link.mjs";import{defineComponent as a,ref as t,computed as l,resolveComponent as s,mergeProps as r,unref as i,withCtx as o,createVNode as n,toDisplayString as c,withAsyncContext as p,watch as d,createTextVNode as m,useSSRContext as u}from"vue";import{ssrRenderAttrs as g,ssrRenderComponent as v,ssrInterpolate as x,ssrRenderAttr as f,ssrRenderClass as b,ssrIncludeBooleanAttr as y,ssrRenderList as h,ssrRenderStyle as _}from"vue/server-renderer";import{g as k,q as $,I as w,h as j,H as S}from"./server.mjs";import{useRoute as A}from"vue-router";import{d as C,p as q,m as z}from"./usePackages.mjs";import{G as I}from"./NuxtImg.vue2.mjs";import{m as N}from"./useWhatsApp.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@iconify/utils";import"node:crypto";import"consola";import"node:module";import"node:url";import"ipx";import"node:fs";import"node:path";import"@supabase/ssr";import"@iconify/vue";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"unhead/utils";import"devalue";import"unhead/plugins";import"@unhead/schema-org";import"@unhead/schema-org/vue";import"floating-vue";import"@iconify/utils/lib/css/icon";const P=a({__name:"PackageContactFormModal",__ssrInlineRender:!0,props:{package_:{}},emits:["close"],setup(e,{emit:a}){const o=e,{t:n}=k();N();const c=t(!1),p=t(!1),d=t(!1),m=t(""),u=l((()=>{const e=`title_${k().locale.value.slice(0,2)}`;return o.package_[e]})),h=t({name:"",email:"",phone:"",message:""}),_=t({name:"",phone:"",email:"",message:""}),w=l((()=>h.value.name.length>0&&h.value.phone.length>0&&(e=>/^[+]?[\d\s-]{8,}$/.test(e))(h.value.phone)&&Object.values(_.value).every((e=>""===e))));return(e,a,t,l)=>{const o=$,k=s("NotificationStatus");a(`<div${g(r({class:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/50 overflow-y-auto py-6"},l))}><div class="relative w-full max-w-2xl bg-white rounded-2xl shadow-xl p-6 md:p-8 max-h-[min(calc(100vh-2rem),42.7rem)] my-6 mt-14 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 hover:scrollbar-thumb-gray-400"><button class="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors" type="button">`),a(v(o,{name:"material-symbols:close",class:"w-6 h-6"},null,t)),a(`<span class="sr-only">${x(i(n)("common.close"))}</span></button>`),p.value?(a('<div class="flex flex-col items-center justify-center py-8"><div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4">'),a(v(o,{name:"material-symbols:check",class:"w-10 h-10 text-green-600"},null,t)),a(`</div><h3 class="text-xl font-bold text-gray-900 mb-2">${x(i(n)("packages.details.package_contact_form.success_title"))}</h3><p class="text-gray-600 text-center mb-4">${x(i(n)("packages.details.package_contact_form.success_message"))}</p>`),a(v(k,{sent:d.value,error:m.value},null,t)),a(`<button class="mt-6 rounded-xl bg-primary px-8 py-3 text-white hover:bg-primary-dark transition-colors">${x(i(n)("common.close"))}</button></div>`)):(a(`\x3c!--[--\x3e<div class="mb-8 mt-8"><h2 class="text-2xl font-bold mb-3 text-gray-900">${x(i(n)("packages.details.package_contact_form.title",{name:u.value}))}</h2><p class="text-gray-600">${x(i(n)("packages.details.package_contact_form.description",{name:u.value}))}</p><div class="mt-4 p-4 bg-primary/5 rounded-xl text-sm text-gray-600 flex items-start gap-2">`),a(v(o,{name:"material-symbols:schedule",class:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"},null,t)),a(`<p>${x(i(n)("packages.details.package_contact_form.response_time"))}</p></div><div class="mt-4 p-4 bg-primary/5 rounded-xl text-sm text-gray-600 flex items-start gap-2">`),a(v(o,{name:"material-symbols:lightbulb-outline",class:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"},null,t)),a(`<p>${x(i(n)("packages.details.package_contact_form.custom_package_note"))}</p></div></div><form class="space-y-6"><div><label class="block text-sm font-medium text-gray-700 mb-1 ltr:text-left rtl:text-right" for="name">${x(i(n)("packages.details.package_contact_form.name"))}</label><div class="relative">`),a(v(o,{name:"material-symbols:person-outline",class:"absolute ltr:left-4 rtl:right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"},null,t)),a(`<input id="name"${f("value",h.value.name)} type="text" required class="${b(["w-full px-4 py-3 ltr:pl-12 rtl:pr-12 rounded-xl border focus:ring-2 focus:ring-primary transition-colors",_.value.name?"border-red-500":"border-gray-300 focus:border-primary"])}"${f("placeholder",i(n)("packages.details.package_contact_form.name_placeholder"))}></div>`),_.value.name?a(`<p class="mt-1 text-sm text-red-500 ltr:text-left rtl:text-right">${x(_.value.name)}</p>`):a("\x3c!----\x3e"),a(`</div><div><label class="block text-sm font-medium text-gray-700 mb-1 ltr:text-left rtl:text-right" for="phone">${x(i(n)("packages.details.package_contact_form.phone"))}</label><div class="relative">`),a(v(o,{name:"material-symbols:call-outline",class:"absolute ltr:left-4 rtl:right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"},null,t)),a(`<input id="phone"${f("value",h.value.phone)} type="text" required class="${b(["w-full px-4 py-3 ltr:pl-12 rtl:pr-12 rounded-xl border focus:ring-2 focus:ring-primary transition-colors",_.value.phone?"border-red-500":"border-gray-300 focus:border-primary"])}"${f("placeholder",i(n)("packages.details.package_contact_form.phone_placeholder"))}></div>`),_.value.phone?a(`<p class="mt-1 text-sm text-red-500 ltr:text-left rtl:text-right">${x(_.value.phone)}</p>`):a("\x3c!----\x3e"),a(`</div><div><label class="block text-sm font-medium text-gray-700 mb-1 ltr:text-left rtl:text-right" for="email">${x(i(n)("packages.details.package_contact_form.email"))}</label><div class="relative">`),a(v(o,{name:"material-symbols:mail-outline",class:"absolute ltr:left-4 rtl:right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"},null,t)),a(`<input id="email"${f("value",h.value.email)} type="text" class="${b(["w-full px-4 py-3 ltr:pl-12 rtl:pr-12 rounded-xl border focus:ring-2 focus:ring-primary transition-colors"])}"${f("placeholder",i(n)("packages.details.package_contact_form.email_placeholder"))}></div></div><div><label class="block text-sm font-medium text-gray-700 mb-1 ltr:text-left rtl:text-right" for="message">${x(i(n)("packages.details.package_contact_form.request_details"))}</label><div class="relative">`),a(v(o,{name:"material-symbols:chat-outline",class:"absolute ltr:left-4 rtl:right-4 top-3 w-5 h-5 text-gray-400"},null,t)),a(`<textarea id="message" rows="4" class="w-full px-4 py-3 ltr:pl-12 rtl:pr-12 rounded-xl border focus:ring-2 focus:ring-primary transition-colors resize-none"${f("placeholder",i(n)("packages.details.package_contact_form.request_details_placeholder"))}>${x(h.value.message)}</textarea></div></div><button type="submit" class="w-full rounded-xl bg-primary px-8 py-3 text-white hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed"${y(c.value||!w.value)?" disabled":""}>`),c.value?a(`<span class="flex items-center justify-center gap-2"><span class="animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"></span> ${x(i(n)("common.loading"))}</span>`):a(`<span>${x(i(n)("packages.details.package_contact_form.submit"))}</span>`),a("</button></form>\x3c!--]--\x3e")),a("</div></div>")}}}),R=a({__name:"PackageDetails",__ssrInlineRender:!0,props:["package_"],setup(e){const a=e,l=t(!1),{t:r,locale:p}=k(),{getWhatsAppUrl:d}=N();return(t,m,u,g)=>{var b,y,_,k,w,j,S,A,z,I;const N=$,R=s("VTooltip");m(`\x3c!--[--\x3e<div class="mx-auto max-w-4xl"><div class="mb-12"><h2 class="text-2xl font-bold mb-6">${x(i(r)("packages.details.overview"))}</h2><h1 class="mb-4 text-4xl font-bold">${x("ar-SA"===i(p)?e.package_.title_ar:e.package_.title_en)}</h1><p class="mb-8 text-lg text-gray-700">${x("ar-SA"===i(p)?e.package_.description_ar:e.package_.description_en)}</p></div><div class="mb-12"><h2 class="text-2xl font-bold mb-6">${x(i(r)("packages.details.package_info"))}</h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><div class="flex items-center gap-3 bg-gray-50 p-4 rounded-xl">`),m(v(N,{name:"material-symbols:schedule-outline",class:"h-6 w-6 text-primary"},null,u)),m(`<div><div class="font-medium">${x(i(r)("packages.details.duration"))}</div><div class="text-gray-700">${x(i(r)("packages.details.duration",{count:null==(b=e.package_)?void 0:b.duration_days}))}</div></div></div>`),null!=(y=e.package_)&&y.travel_period?(m('<div class="flex items-center gap-3 bg-gray-50 p-4 rounded-xl">'),m(v(N,{name:"material-symbols:date-range-outline",class:"h-6 w-6 text-primary"},null,u)),m(`<div><div class="font-medium">${x(i(r)("packages.details.travel_period"))}</div><div class="text-gray-700">${x(null==(_=e.package_)?void 0:_.travel_period)}</div></div></div>`)):m("\x3c!----\x3e"),null!=(k=e.package_)&&k.price?(m('<div class="flex items-center gap-3 bg-gray-50 p-4 rounded-xl">'),m(v(C,{size:24,class:"text-primary"},null,u)),m(`<div><div class="font-medium">${x(t.$t("packages.details.price"))}</div><div class="flex items-center gap-2 mt-1"><span class="text-gray-700">${x(null==(w=e.package_)?void 0:w.price.toLocaleString())}</span><span class="text-base text-gray-700 font-normal">${x(t.$t("packages.details.per_person"))}</span>`),m(v(R,{triggers:["hover","focus"],placement:"top"},{popper:o(((e,a,l,s)=>{if(!a)return[n("div",{class:"bg-gray-900 text-white text-xs px-3 py-2 rounded-lg shadow-lg max-w-xs text-center"},c(t.$t("packages.details.price_info_tooltip")),1)];a(`<div class="bg-gray-900 text-white text-xs px-3 py-2 rounded-lg shadow-lg max-w-xs text-center"${s}>${x(t.$t("packages.details.price_info_tooltip"))}</div>`)})),default:o(((e,a,t,l)=>{if(!a)return[n(N,{name:"material-symbols:info-outline",class:"w-5 h-5 text-gray-400 cursor-pointer"})];a(v(N,{name:"material-symbols:info-outline",class:"w-5 h-5 text-gray-400 cursor-pointer"},null,t,l))})),_:1},u)),m("</div></div></div>")):m("\x3c!----\x3e"),m('<div class="flex items-center gap-3 bg-gray-50 p-4 rounded-xl">'),m(v(N,{name:"material-symbols:group-outline",class:"h-6 w-6 text-primary"},null,u)),m(`<div><div class="font-medium">${x(i(r)("packages.details.travelers"))}</div><div class="text-gray-700">${x(i(r)("packages.details.max_persons_qty",{count:null==(j=e.package_)?void 0:j.max_persons}))}</div></div></div></div></div><div class="mb-12"><h2 class="text-2xl font-bold mb-6">${x(i(r)("packages.details.included_services"))}</h2><div class="grid grid-cols-1 md:grid-cols-3 gap-6">`),null!=(S=e.package_)&&S.included_options.flight?(m('<div class="flex items-center gap-3 bg-gray-50 p-4 rounded-xl">'),m(v(q,{size:24,class:"text-primary"},null,u)),m(`<span class="font-medium">${x(i(r)("packages.details.flight"))}</span></div>`)):m("\x3c!----\x3e"),null!=(A=e.package_)&&A.included_options.hotel?(m('<div class="flex flex-col gap-1 bg-gray-50 p-4 rounded-xl"><div class="flex items-center gap-3">'),m(v(N,{name:"material-symbols:hotel-outline",class:"h-6 w-6 text-primary"},null,u)),m(`<span class="font-medium">${x(i(r)("packages.details.hotel"))}</span></div>`),null!=(z=e.package_)&&z.included_options.hotelGrade?(m('<div class="flex items-center gap-1 mt-1">\x3c!--[--\x3e'),h(e.package_.included_options.hotelGrade,(e=>{m(v(N,{key:e,name:"material-symbols:star",class:"w-4 h-4 text-yellow-400","aria-label":"star"},null,u))})),m(`\x3c!--]--\x3e<span class="text-xs text-gray-700">${x(i(r)("packages.details.hotel_grade",{grade:e.package_.included_options.hotelGrade}))}</span></div>`)):m("\x3c!----\x3e"),m("</div>")):m("\x3c!----\x3e"),null!=(I=e.package_)&&I.included_options.transportation?(m('<div class="flex items-center gap-3 bg-gray-50 p-4 rounded-xl">'),m(v(N,{name:"material-symbols:directions-car-outline",class:"h-6 w-6 text-primary"},null,u)),m(`<span class="font-medium">${x(i(r)("packages.details.transportation"))}</span></div>`)):m("\x3c!----\x3e"),m(`</div></div><div class="bg-primary/5 rounded-2xl p-6 md:p-8 mb-12"><div class="flex flex-col md:flex-row items-center gap-6 md:gap-8"><div class="flex-1"><h3 class="text-2xl font-bold mb-3 md:mb-4">${x(i(r)("packages.details.custom_package.title"))}</h3><p class="text-gray-600 mb-6">${x(i(r)("packages.details.custom_package.description"))}</p><div class="flex flex-col sm:flex-row gap-4"><button class="rounded-full bg-primary-500 px-8 py-3 text-white hover:bg-primary-800 transition-colors flex items-center justify-center gap-2">`),m(v(N,{name:"material-symbols:chat",class:"h-5 w-5"},null,u)),m(`<span>${x(i(r)("packages.details.custom_package.cta"))}</span></button><a${f("href",i(d)(`${i(r)("whatsapp.messages.package_interest",{name:a.package_[`title_${i(p).slice(0,2)}`]})}`))} target="_blank" rel="noopener noreferrer" class="rounded-full bg-[#25D366] px-8 py-3 text-white hover:bg-[#128C7E] transition-colors flex items-center justify-center gap-2">`),m(v(N,{name:"logos:whatsapp-icon",class:"w-5 h-5"},null,u)),m(`<span>${x(t.$t("packages.details.custom_package.cta_whatsapp"))}</span></a></div></div></div></div></div>`),l.value?m(v(P,{package_:e.package_,onClose:e=>l.value=!1},null,u)):m("\x3c!----\x3e"),m("\x3c!--]--\x3e")}}}),G=a({__name:"[id]",__ssrInlineRender:!0,async setup(a){let r,n;const u=A(),{t:f,locale:b}=k(),{getPackageById:y}=z(),h=t(!1),{data:$,pending:C,error:q}=([r,n]=p((()=>w(`package-${u.params.id}`,(()=>y(u.params.id)),{watch:[u.params.id]}))),r=await r,n(),r);return d($,(e=>{!e&&!C.value&&j().push("/packages")})),S({title:l((()=>$.value?`${$.value[`title_${b.value.slice(0,2)}`]} | Wonder Land Agency`:"Loading...")),meta:[{name:"description",content:l((()=>{var e;return(null==(e=$.value)?void 0:e[`description_${b.value.slice(0,2)}`])||""}))},{property:"og:title",content:l((()=>{var e;return(null==(e=$.value)?void 0:e[`title_${b.value.slice(0,2)}`])||""}))},{property:"og:description",content:l((()=>{var e;return(null==(e=$.value)?void 0:e[`description_${b.value.slice(0,2)}`])||""}))},{property:"og:image",content:l((()=>{var e;return(null==(e=$.value)?void 0:e.image_url)||""}))},{name:"twitter:card",content:"summary_large_image"},{property:"og:type",content:"product"},{property:"og:price:amount",content:l((()=>{var e;return(null==(e=$.value)?void 0:e.price.toString())||""}))},{property:"og:price:currency",content:"SAR"}]}),(a,t,l,r)=>{const n=e,p=I,d=s("ContactFormModal");t(`<div${g(r)}>`),i(C)?t(`<div class="flex justify-center items-center min-h-screen"><div class="animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"></div><span class="sr-only">${x(a.$t("common.loading"))}</span></div>`):i(q)?(t(`<div class="min-h-screen flex flex-col items-center justify-center px-4 text-center"><h1 class="text-2xl font-bold text-gray-900 mb-4">${x(a.$t("common.error"))}</h1><p class="text-gray-600 mb-8">${x(i(q).message)}</p>`),t(v(n,{to:"/",class:"rounded-full bg-primary px-6 py-3 text-white hover:bg-primary-dark transition-colors"},{default:o(((e,t,l,s)=>{if(!t)return[m(c(a.$t("common.back_home")),1)];t(`${x(a.$t("common.back_home"))}`)})),_:1},l)),t("</div>")):i($)?(t(`<div class="relative min-h-screen"><div class="relative h-[40vh] md:h-[60vh]" style="${_({viewTransitionName:`package-image-${i($).id}`})}">`),t(v(p,{src:i($).image_url,class:"h-full w-full object-cover",alt:"ar-SA"===a.$i18n.locale?i($).title_ar:i($).title_en},null,l)),t(`<div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div></div><div class="relative z-10 -mt-32 rounded-t-[2.5rem] bg-surface px-4 pb-20 pt-12 md:px-8" style="${_({viewTransitionName:`package-content-${i($).id}`})}">`),t(v(R,{package_:i($),onContact:e=>h.value=!0},null,l)),t("</div></div>")):t("\x3c!----\x3e"),h.value?t(v(d,{package_:i($),onClose:e=>h.value=!1},null,l)):t("\x3c!----\x3e"),t("</div>")}}}),L=G.setup;G.setup=(e,a)=>{const t=u();return(t.modules||(t.modules=new Set)).add("pages/packages/[id].vue"),L?L(e,a):void 0};export{G as default};
//# sourceMappingURL=_id_.vue.mjs.map
