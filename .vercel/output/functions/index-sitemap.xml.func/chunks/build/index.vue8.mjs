import{H as a,q as e,s as t}from"./server.mjs";import{defineComponent as s,ref as l,computed as c,mergeProps as d,unref as i,useSSRContext as v}from"vue";import{ssrRenderAttrs as n,ssrRenderComponent as o,ssrInterpolate as p,ssrRenderAttr as r,ssrIncludeBooleanAttr as u,ssrLooseContain as m,ssrLooseEqual as b,ssrRenderList as h,ssrRenderClass as g}from"vue/server-renderer";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@iconify/utils";import"node:crypto";import"consola";import"node:module";import"node:url";import"ipx";import"node:fs";import"node:path";import"vue-router";import"@supabase/ssr";import"@iconify/vue";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"unhead/utils";import"devalue";import"unhead/plugins";import"@unhead/schema-org";import"@unhead/schema-org/vue";import"floating-vue";import"@iconify/utils/lib/css/icon";const f=s({__name:"index",__ssrInlineRender:!0,setup(t){const s=l([]),v=l([]),f=l(!0),_=l(""),A=l(""),k=l(""),w=l(""),L=l(!1),C=l(null),S=c((()=>{let a=s.value;return _.value&&(a=a.filter((a=>a.customer_name.toLowerCase().includes(_.value.toLowerCase())||a.customer_email.toLowerCase().includes(_.value.toLowerCase())||a.package_title.toLowerCase().includes(_.value.toLowerCase())))),A.value&&(a=a.filter((a=>a.status===A.value))),k.value&&(a=a.filter((a=>a.package_title===k.value))),w.value&&(a=a.filter((a=>a.travel_date.startsWith(w.value)))),a})),j=c((()=>s.value.length)),I=c((()=>s.value.filter((a=>"confirmed"===a.status)).length)),D=c((()=>s.value.filter((a=>"pending"===a.status)).length)),R=c((()=>s.value.reduce(((a,e)=>a+e.total_amount),0))),x=a=>({pending:"في الانتظار",confirmed:"مؤكد",cancelled:"ملغي",completed:"مكتمل"}[a]||a),$=a=>new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR"}).format(a),y=a=>new Date(a).toLocaleDateString("ar-SA");return a({title:"إدارة الحجوزات - لوحة التحكم"}),(a,t,s,l)=>{var c;const F=e;t(`<div${n(d({class:"bookings-page space-y-4"},l))} data-v-e580261c><div class="page-header" data-v-e580261c><div class="header-content" data-v-e580261c><div class="header-left" data-v-e580261c><h1 class="page-title" data-v-e580261c>إدارة الحجوزات</h1><p class="page-subtitle" data-v-e580261c>إدارة جميع حجوزات العملاء</p></div><div class="header-right" data-v-e580261c><button class="export-btn" data-v-e580261c>`),t(o(F,{name:"lucide:download",class:"btn-icon"},null,s)),t(' تصدير البيانات </button></div></div></div><div class="stats-grid" data-v-e580261c><div class="stat-card" data-v-e580261c><div class="stat-icon" data-v-e580261c>'),t(o(F,{name:"lucide:calendar",class:"icon"},null,s)),t(`</div><div class="stat-content" data-v-e580261c><p class="stat-value" data-v-e580261c>${p(i(j))}</p><p class="stat-label" data-v-e580261c>إجمالي الحجوزات</p></div></div><div class="stat-card" data-v-e580261c><div class="stat-icon" data-v-e580261c>`),t(o(F,{name:"lucide:check-circle",class:"icon"},null,s)),t(`</div><div class="stat-content" data-v-e580261c><p class="stat-value" data-v-e580261c>${p(i(I))}</p><p class="stat-label" data-v-e580261c>الحجوزات المؤكدة</p></div></div><div class="stat-card" data-v-e580261c><div class="stat-icon" data-v-e580261c>`),t(o(F,{name:"lucide:clock",class:"icon"},null,s)),t(`</div><div class="stat-content" data-v-e580261c><p class="stat-value" data-v-e580261c>${p(i(D))}</p><p class="stat-label" data-v-e580261c>في الانتظار</p></div></div><div class="stat-card" data-v-e580261c><div class="stat-icon" data-v-e580261c>`),t(o(F,{name:"lucide:dollar-sign",class:"icon"},null,s)),t(`</div><div class="stat-content" data-v-e580261c><p class="stat-value" data-v-e580261c>${p($(i(R)))}</p><p class="stat-label" data-v-e580261c>إجمالي الإيرادات</p></div></div></div><div class="filters-section" data-v-e580261c><div class="filters-container" data-v-e580261c><div class="search-box" data-v-e580261c>`),t(o(F,{name:"lucide:search",class:"search-icon"},null,s)),t(`<input${r("value",i(_))} type="text" placeholder="البحث في الحجوزات..." class="search-input" data-v-e580261c></div><div class="filter-controls" data-v-e580261c><select class="filter-select" data-v-e580261c><option value="" data-v-e580261c${u(Array.isArray(i(A))?m(i(A),""):b(i(A),""))?" selected":""}>جميع الحالات</option><option value="pending" data-v-e580261c${u(Array.isArray(i(A))?m(i(A),"pending"):b(i(A),"pending"))?" selected":""}>في الانتظار</option><option value="confirmed" data-v-e580261c${u(Array.isArray(i(A))?m(i(A),"confirmed"):b(i(A),"confirmed"))?" selected":""}>مؤكد</option><option value="cancelled" data-v-e580261c${u(Array.isArray(i(A))?m(i(A),"cancelled"):b(i(A),"cancelled"))?" selected":""}>ملغي</option><option value="completed" data-v-e580261c${u(Array.isArray(i(A))?m(i(A),"completed"):b(i(A),"completed"))?" selected":""}>مكتمل</option></select><select class="filter-select" data-v-e580261c><option value="" data-v-e580261c${u(Array.isArray(i(k))?m(i(k),""):b(i(k),""))?" selected":""}>جميع الباقات</option>\x3c!--[--\x3e`),h(i(v),(a=>{t(`<option${r("value",a.id)} data-v-e580261c${u(Array.isArray(i(k))?m(i(k),a.id):b(i(k),a.id))?" selected":""}>${p(a.title)}</option>`)})),t(`\x3c!--]--\x3e</select><input${r("value",i(w))} type="date" class="filter-select" placeholder="تاريخ الحجز" data-v-e580261c></div></div></div><div class="bookings-table-container" data-v-e580261c>`),i(f)?t('<div class="loading-state" data-v-e580261c><div class="loading-spinner" data-v-e580261c></div><p data-v-e580261c>جاري تحميل الحجوزات...</p></div>'):0===i(S).length?(t('<div class="empty-state" data-v-e580261c>'),t(o(F,{name:"lucide:calendar",class:"empty-icon"},null,s)),t("<h3 data-v-e580261c>لا توجد حجوزات</h3><p data-v-e580261c>لم يتم العثور على أي حجوزات تطابق معايير البحث</p></div>")):(t('<div class="bookings-table" data-v-e580261c><table class="table" data-v-e580261c><thead class="table-header" data-v-e580261c><tr data-v-e580261c><th class="table-cell" data-v-e580261c>رقم الحجز</th><th class="table-cell" data-v-e580261c>العميل</th><th class="table-cell" data-v-e580261c>الباقة</th><th class="table-cell" data-v-e580261c>تاريخ السفر</th><th class="table-cell" data-v-e580261c>عدد الأشخاص</th><th class="table-cell" data-v-e580261c>المبلغ</th><th class="table-cell" data-v-e580261c>الحالة</th><th class="table-cell" data-v-e580261c>الإجراءات</th></tr></thead><tbody class="table-body" data-v-e580261c>\x3c!--[--\x3e'),h(i(S),(a=>{t(`<tr class="table-row" data-v-e580261c><td class="table-cell" data-v-e580261c><span class="booking-id" data-v-e580261c>#${p(a.id.slice(-8))}</span></td><td class="table-cell" data-v-e580261c><div class="customer-info" data-v-e580261c><p class="customer-name" data-v-e580261c>${p(a.customer_name)}</p><p class="customer-email" data-v-e580261c>${p(a.customer_email)}</p></div></td><td class="table-cell" data-v-e580261c><div class="package-info" data-v-e580261c><p class="package-name" data-v-e580261c>${p(a.package_title)}</p><p class="package-destination" data-v-e580261c>${p(a.destination)}</p></div></td><td class="table-cell" data-v-e580261c><span class="travel-date" data-v-e580261c>${p(y(a.travel_date))}</span></td><td class="table-cell" data-v-e580261c><span class="participants" data-v-e580261c>${p(a.participants_count)}</span></td><td class="table-cell" data-v-e580261c><span class="amount" data-v-e580261c>${p($(a.total_amount))}</span></td><td class="table-cell" data-v-e580261c><span class="${g([a.status,"status-badge"])}" data-v-e580261c>${p(x(a.status))}</span></td><td class="table-cell" data-v-e580261c><div class="action-buttons" data-v-e580261c><button class="action-btn view" data-v-e580261c>`),t(o(F,{name:"lucide:eye",class:"action-icon"},null,s)),t('</button><button class="action-btn edit" data-v-e580261c>'),t(o(F,{name:"lucide:edit",class:"action-icon"},null,s)),t('</button><button class="action-btn status" data-v-e580261c>'),t(o(F,{name:"lucide:settings",class:"action-icon"},null,s)),t("</button></div></td></tr>")})),t("\x3c!--]--\x3e</tbody></table></div>")),t("</div>"),i(L)?(t(`<div class="modal-overlay" data-v-e580261c><div class="modal-content large" data-v-e580261c><div class="modal-header" data-v-e580261c><h2 class="modal-title" data-v-e580261c>تفاصيل الحجز #${p(null==(c=i(C))?void 0:c.id.slice(-8))}</h2><button class="modal-close" data-v-e580261c>`),t(o(F,{name:"lucide:x",class:"close-icon"},null,s)),t("</button></div>"),i(C)?(t(`<div class="modal-body" data-v-e580261c><div class="booking-details-grid" data-v-e580261c><div class="detail-section" data-v-e580261c><h3 class="section-title" data-v-e580261c>معلومات العميل</h3><div class="detail-items" data-v-e580261c><div class="detail-item" data-v-e580261c><span class="detail-label" data-v-e580261c>الاسم:</span><span class="detail-value" data-v-e580261c>${p(i(C).customer_name)}</span></div><div class="detail-item" data-v-e580261c><span class="detail-label" data-v-e580261c>البريد الإلكتروني:</span><span class="detail-value" data-v-e580261c>${p(i(C).customer_email)}</span></div><div class="detail-item" data-v-e580261c><span class="detail-label" data-v-e580261c>رقم الهاتف:</span><span class="detail-value" data-v-e580261c>${p(i(C).customer_phone)}</span></div></div></div><div class="detail-section" data-v-e580261c><h3 class="section-title" data-v-e580261c>معلومات الرحلة</h3><div class="detail-items" data-v-e580261c><div class="detail-item" data-v-e580261c><span class="detail-label" data-v-e580261c>الباقة:</span><span class="detail-value" data-v-e580261c>${p(i(C).package_title)}</span></div><div class="detail-item" data-v-e580261c><span class="detail-label" data-v-e580261c>الوجهة:</span><span class="detail-value" data-v-e580261c>${p(i(C).destination)}</span></div><div class="detail-item" data-v-e580261c><span class="detail-label" data-v-e580261c>تاريخ السفر:</span><span class="detail-value" data-v-e580261c>${p(y(i(C).travel_date))}</span></div><div class="detail-item" data-v-e580261c><span class="detail-label" data-v-e580261c>عدد الأشخاص:</span><span class="detail-value" data-v-e580261c>${p(i(C).participants_count)}</span></div></div></div><div class="detail-section" data-v-e580261c><h3 class="section-title" data-v-e580261c>معلومات الدفع</h3><div class="detail-items" data-v-e580261c><div class="detail-item" data-v-e580261c><span class="detail-label" data-v-e580261c>المبلغ الإجمالي:</span><span class="detail-value" data-v-e580261c>${p($(i(C).total_amount))}</span></div><div class="detail-item" data-v-e580261c><span class="detail-label" data-v-e580261c>المبلغ المدفوع:</span><span class="detail-value" data-v-e580261c>${p($(i(C).paid_amount))}</span></div><div class="detail-item" data-v-e580261c><span class="detail-label" data-v-e580261c>المبلغ المتبقي:</span><span class="detail-value" data-v-e580261c>${p($(i(C).total_amount-i(C).paid_amount))}</span></div></div></div><div class="detail-section" data-v-e580261c><h3 class="section-title" data-v-e580261c>حالة الحجز</h3><div class="detail-items" data-v-e580261c><div class="detail-item" data-v-e580261c><span class="detail-label" data-v-e580261c>الحالة:</span><span class="${g([i(C).status,"status-badge"])}" data-v-e580261c>${p(x(i(C).status))}</span></div><div class="detail-item" data-v-e580261c><span class="detail-label" data-v-e580261c>تاريخ الحجز:</span><span class="detail-value" data-v-e580261c>${p(y(i(C).created_at))}</span></div><div class="detail-item" data-v-e580261c><span class="detail-label" data-v-e580261c>آخر تحديث:</span><span class="detail-value" data-v-e580261c>${p(y(i(C).updated_at))}</span></div></div></div></div>`),i(C).notes?t(`<div class="notes-section" data-v-e580261c><h3 class="section-title" data-v-e580261c>ملاحظات</h3><p class="notes-text" data-v-e580261c>${p(i(C).notes)}</p></div>`):t("\x3c!----\x3e"),t("</div>")):t("\x3c!----\x3e"),t('<div class="modal-actions" data-v-e580261c><button class="btn-secondary" data-v-e580261c> إغلاق </button><button class="btn-primary" data-v-e580261c>'),t(o(F,{name:"lucide:edit",class:"btn-icon"},null,s)),t(" تعديل الحجز </button></div></div></div>")):t("\x3c!----\x3e"),t("</div>")}}}),_=f.setup;f.setup=(a,e)=>{const t=v();return(t.modules||(t.modules=new Set)).add("pages/admin/bookings/index.vue"),_?_(a,e):void 0};const A=t(f,[["__scopeId","data-v-e580261c"]]);export{A as default};
//# sourceMappingURL=index.vue8.mjs.map
