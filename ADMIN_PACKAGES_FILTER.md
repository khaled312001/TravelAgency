# تصفية الباقات لعرض الباقات من لوحة الإدارة فقط

## المشكلة
كان الموقع يعرض جميع الباقات الموجودة في قاعدة البيانات، بما في ذلك الباقات التي تم إدراجها مسبقاً (مثل bulk-insert). المطلوب هو عرض الباقات التي تم إنشاؤها من لوحة الإدارة فقط.

## الحل المطبق

### 1. إضافة حقل `created_by_admin`
تم إضافة حقل `created_by_admin` من نوع `BOOLEAN` لجدول `packages` لتمييز الباقات التي تم إنشاؤها من لوحة الإدارة.

### 2. تحديث API إنشاء الباقات
- **ملف**: `server/api/admin/packages/index.post.ts`
- **التغيير**: إضافة `created_by_admin: true` عند إنشاء باقة جديدة من لوحة الإدارة

### 3. تحديث API تعديل الباقات
- **ملف**: `server/api/admin/packages/[id].put.ts`
- **التغيير**: التأكد من أن الباقات المحدثة تحتفظ بـ `created_by_admin: true`

### 4. تحديث usePackages Composable
- **ملف**: `composables/usePackages.ts`
- **التغيير**: إضافة فلتر `.eq('created_by_admin', true)` لاسترجاع الباقات من الإدارة فقط

### 5. تحديث Interface
تم تحديث `Package` interface لتشمل الحقول الجديدة:
- `featured?: boolean`
- `created_by_admin?: boolean`

## الملفات المحدثة

1. `server/api/admin/packages/index.post.ts` - إنشاء باقات جديدة
2. `server/api/admin/packages/[id].put.ts` - تحديث الباقات
3. `composables/usePackages.ts` - فلترة الباقات
4. `update-packages-admin-field.sql` - تحديث قاعدة البيانات

## خطوات التطبيق

### 1. تحديث قاعدة البيانات
```sql
-- تشغيل ملف SQL
\i update-packages-admin-field.sql
```

### 2. إعادة نشر التطبيق
```bash
git add .
git commit -m "Filter packages to show only admin-created packages"
git push origin main
```

## النتائج المتوقعة

### قبل التطبيق:
- عرض جميع الباقات في قاعدة البيانات
- عرض الباقات من bulk-insert والبيانات المسبقة

### بعد التطبيق:
- عرض الباقات التي تم إنشاؤها من لوحة الإدارة فقط
- عدم عرض الباقات المسبقة أو bulk-insert
- إمكانية التحكم الكامل في الباقات المعروضة من خلال لوحة الإدارة

## كيفية إضافة باقات جديدة

1. اذهب إلى لوحة الإدارة: `/admin/packages`
2. اضغط على "إضافة باقة جديدة"
3. املأ بيانات الباقة
4. احفظ الباقة
5. ستظهر الباقة تلقائياً في:
   - صفحة الباقات: `/packages`
   - قسم الباقات في الصفحة الرئيسية

## ملاحظات مهمة

- الباقات الموجودة مسبقاً لن تظهر حتى يتم تحديثها من لوحة الإدارة
- يمكن إضافة الباقات المهمة يدوياً من لوحة الإدارة
- الحل يوفر تحكماً كاملاً في الباقات المعروضة
- لا يؤثر على أداء الموقع أو قاعدة البيانات
